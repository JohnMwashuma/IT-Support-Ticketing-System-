/** @license


 SoundManager 2: JavaScript Sound for the Web
 ----------------------------------------------
 http://schillmania.com/projects/soundmanager2/

 Copyright (c) 2007, Scott Schiller. All rights reserved.
 Code provided under the BSD License:
 http://schillmania.com/projects/soundmanager2/license.txt

 V2.97a.20130512
*/
/** @license
	Animator.js 1.1.9
	
	This library is released under the BSD license:

	Copyright (c) 2006, Bernard Sumption. All rights reserved.
	
	Redistribution and use in source and binary forms, with or without
	modification, are permitted provided that the following conditions are met:
	
	Redistributions of source code must retain the above copyright notice, this
	list of conditions and the following disclaimer. Redistributions in binary
	form must reproduce the above copyright notice, this list of conditions and
	the following disclaimer in the documentation and/or other materials
	provided with the distribution. Neither the name BernieCode nor
	the names of its contributors may be used to endorse or promote products
	derived from this software without specific prior written permission. 
	
	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
	AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
	IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
	ARE DISCLAIMED. IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE FOR
	ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
	DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
	SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
	CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
	LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
	OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
	DAMAGE.

*/
function Animator(e){this.setOptions(e);var t=this;this.timerDelegate=function(){t.onTimerEvent()},this.subjects=[],this.subjectScopes=[],this.target=0,this.state=0,this.lastTime=null}function NumericalStyleSubject(e,t,n,i,r){this.els=Animator.makeArray(e),this.property="opacity"==t&&window.ActiveXObject?"filter":Animator.camelize(t),this.from=parseFloat(n),this.to=parseFloat(i),this.units=null!=r?r:"px"}function ColorStyleSubject(e,t,n,i){this.els=Animator.makeArray(e),this.property=Animator.camelize(t),this.to=this.expandColor(i),this.from=this.expandColor(n),this.origFrom=n,this.origTo=i}function DiscreteStyleSubject(e,t,n,i,r){this.els=Animator.makeArray(e),this.property=Animator.camelize(t),this.from=n,this.to=i,this.threshold=r||.5}function CSSStyleSubject(e,t,n){if(e=Animator.makeArray(e),this.subjects=[],0!=e.length){var i,r,s;if(n)s=this.parseStyle(t,e[0]),r=this.parseStyle(n,e[0]);else{r=this.parseStyle(t,e[0]),s={};for(i in r)s[i]=CSSStyleSubject.getStyle(e[0],i)}var i;for(i in s)s[i]==r[i]&&(delete s[i],delete r[i]);var i,o,a,l,c,u;for(i in s){var d=String(s[i]),h=String(r[i]);if(null!=r[i]){if(c=ColorStyleSubject.parseColor(d))u=ColorStyleSubject.parseColor(h),l=ColorStyleSubject;else if(d.match(CSSStyleSubject.numericalRe)&&h.match(CSSStyleSubject.numericalRe)){c=parseFloat(d),u=parseFloat(h),l=NumericalStyleSubject,a=CSSStyleSubject.numericalRe.exec(d);var p=CSSStyleSubject.numericalRe.exec(h);o=null!=a[1]?a[1]:null!=p[1]?p[1]:p}else{if(!d.match(CSSStyleSubject.discreteRe)||!h.match(CSSStyleSubject.discreteRe)){window.DEBUG&&alert("Unrecognised format for value of "+i+": '"+s[i]+"'");continue}c=d,u=h,l=DiscreteStyleSubject,o=0}this.subjects[this.subjects.length]=new l(e,i,c,u,o)}else window.DEBUG&&alert("No to style provided for '"+i+'"')}}}function AnimatorChain(e,t){this.animators=e,this.setOptions(t);for(var n=0;n<this.animators.length;n++)this.listenTo(this.animators[n]);this.forwards=!1,this.current=0}function Accordion(e){this.setOptions(e);var t,n=this.options.initialSection;this.options.rememberance&&(t=document.location.hash.substring(1)),this.rememberanceTexts=[],this.ans=[];for(var i=this,r=0;r<this.options.sections.length;r++){var s=this.options.sections[r],o=new Animator(this.options.animatorOptions),a=this.options.from+this.options.shift*r,l=this.options.to+this.options.shift*r;o.addSubject(new NumericalStyleSubject(s,this.options.property,a,l,this.options.units)),o.jumpTo(0);var c=this.options.getActivator(s);c.index=r,c.onclick=function(){i.show(this.index)},this.ans[this.ans.length]=o,this.rememberanceTexts[r]=c.innerHTML.replace(/\s/g,""),this.rememberanceTexts[r]===t&&(n=r)}this.show(n)}!function(e,t){function n(n,i){function r(e){return ft.preferFlash&&at&&!ft.ignoreFlash&&ft.flash[e]!==t&&ft.flash[e]}function s(e){return function(t){var n=this._s;return n&&n._a?t=e.call(this,t):(n&&n.id?ft._wD(n.id+": Ignoring "+t.type):ft._wD(vt+"Ignoring "+t.type),t=null),t}}this.setupOptions={url:n||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!0,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=i||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20130512",this.altURL=this.movieURL=this.version=null,this.enabled=this.swfLoaded=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.didFlashBlock=this.muted=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.ignoreFlash=this.html5Only=!1;var o,a,l,c,u,d,h,p,f,m,g,v,y,_,b,w,k,C,A,x,T,S,N,E,D,M,O,P,I,R,F,j,L,$,H,B,U,Q,z,W,q,V,G,Y,K,X,J,Z,et,tt,nt,it,rt,st,ot,at,lt,ct,ut,dt,ht,pt,ft=this,mt=null,gt=null,vt="HTML5::",yt=navigator.userAgent,_t=e.location.href.toString(),bt=document,wt=[],kt=!0,Ct=!1,At=!1,xt=!1,Tt=!1,St=!1,Nt=0,Et=["log","info","warn","error"],Dt=null,Mt=null,Ot=!1,Pt=!1,It=0,Rt=null,Ft=[],jt=null,Lt=Array.prototype.slice,$t=!1,Ht=0,Bt=yt.match(/(ipad|iphone|ipod)/i),Ut=yt.match(/android/i),Qt=yt.match(/msie/i),zt=yt.match(/webkit/i),Wt=yt.match(/safari/i)&&!yt.match(/chrome/i),qt=yt.match(/opera/i),Vt=yt.match(/firefox/i),Gt=yt.match(/(mobile|pre\/|xoom)/i)||Bt||Ut,Yt=!_t.match(/usehtml5audio/i)&&!_t.match(/sm2\-ignorebadua/i)&&Wt&&!yt.match(/silk/i)&&yt.match(/OS X 10_6_([3-7])/i),Kt=e.console!==t&&console.log!==t,Xt=bt.hasFocus!==t?bt.hasFocus():null,Jt=Wt&&(bt.hasFocus===t||!bt.hasFocus()),Zt=!Jt,en=/(mp3|mp4|mpa|m4a|m4b)/i,tn=bt.location?bt.location.protocol.match(/http/i):null,nn=tn?"":"http://",rn=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,sn="mpeg4 aac flv mov mp4 m4v f4v m4a m4b mp4v 3gp 3g2".split(" "),on=RegExp("\\.("+sn.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!tn;var an;try{an=Audio!==t&&(qt&&opera!==t&&10>opera.version()?new Audio(null):new Audio).canPlayType!==t}catch(ln){an=!1}this.hasHTML5=an,this.setup=function(e){var n=!ft.url;return e!==t&&xt&&jt&&ft.ok()&&(e.flashVersion!==t||e.url!==t||e.html5Test!==t)&&W($("setupLate")),g(e),e&&(n&&D&&e.url!==t&&ft.beginDelayedInit(),!D&&e.url!==t&&"complete"===bt.readyState&&setTimeout(N,1)),ft},this.supported=this.ok=function(){return jt?xt&&!Tt:ft.useHTML5Audio&&ft.hasHTML5},this.getMovie=function(t){return a(t)||bt[t]||e[t]},this.createSound=function(e,n){function i(){return s=Q(s),ft.sounds[s.id]=new o(s),ft.soundIDs.push(s.id),ft.sounds[s.id]}var r,s;if(r=null,r="soundManager.createSound(): "+$(xt?"notOK":"notReady"),!xt||!ft.ok())return W(r),!1;if(n!==t&&(e={id:e,url:n}),s=m(e),s.url=K(s.url),void 0===s.id&&(s.id=ft.setupOptions.idPrefix+Ht++),s.id.toString().charAt(0).match(/^[0-9]$/)&&ft._wD("soundManager.createSound(): "+$("badID",s.id),2),ft._wD("soundManager.createSound(): "+s.id+(s.url?" ("+s.url+")":""),1),q(s.id,!0))return ft._wD("soundManager.createSound(): "+s.id+" exists",1),ft.sounds[s.id];if(Z(s))r=i(),ft._wD(s.id+": Using HTML5"),r._setup_html5(s);else{if(ft.html5Only)return ft._wD(s.id+": No HTML5 support for this sound, and no Flash. Exiting."),i();if(ft.html5.usingFlash&&s.url&&s.url.match(/data\:/i))return ft._wD(s.id+": data: URIs not supported via Flash. Exiting."),i();d>8&&(null===s.isMovieStar&&(s.isMovieStar=!!(s.serverURL||s.type&&s.type.match(rn)||s.url&&s.url.match(on))),s.isMovieStar&&(ft._wD("soundManager.createSound(): using MovieStar handling"),1<s.loops&&p("noNSLoop"))),s=z(s,"soundManager.createSound(): "),r=i(),8===d?gt._createSound(s.id,s.loops||1,s.usePolicyFile):(gt._createSound(s.id,s.url,s.usePeakData,s.useWaveformData,s.useEQData,s.isMovieStar,s.isMovieStar?s.bufferTime:!1,s.loops||1,s.serverURL,s.duration||null,s.autoPlay,!0,s.autoLoad,s.usePolicyFile),s.serverURL||(r.connected=!0,s.onconnect&&s.onconnect.apply(r))),!s.serverURL&&(s.autoLoad||s.autoPlay)&&r.load(s)}return!s.serverURL&&s.autoPlay&&r.play(),r},this.destroySound=function(e,t){if(!q(e))return!1;var n,i=ft.sounds[e];for(i._iO={},i.stop(),i.unload(),n=0;n<ft.soundIDs.length;n++)if(ft.soundIDs[n]===e){ft.soundIDs.splice(n,1);break}return t||i.destruct(!0),delete ft.sounds[e],!0},this.load=function(e,t){return q(e)?ft.sounds[e].load(t):!1},this.unload=function(e){return q(e)?ft.sounds[e].unload():!1},this.onposition=this.onPosition=function(e,t,n,i){return q(e)?ft.sounds[e].onposition(t,n,i):!1},this.clearOnPosition=function(e,t,n){return q(e)?ft.sounds[e].clearOnPosition(t,n):!1},this.start=this.play=function(e,t){var n=null,i=t&&!(t instanceof Object);if(!xt||!ft.ok())return W("soundManager.play(): "+$(xt?"notOK":"notReady")),!1;if(q(e,i))i&&(t={url:t});else{if(!i)return!1;i&&(t={url:t}),t&&t.url&&(ft._wD('soundManager.play(): Attempting to create "'+e+'"',1),t.id=e,n=ft.createSound(t).play())}return null===n&&(n=ft.sounds[e].play(t)),n},this.setPosition=function(e,t){return q(e)?ft.sounds[e].setPosition(t):!1},this.stop=function(e){return q(e)?(ft._wD("soundManager.stop("+e+")",1),ft.sounds[e].stop()):!1},this.stopAll=function(){var e;ft._wD("soundManager.stopAll()",1);for(e in ft.sounds)ft.sounds.hasOwnProperty(e)&&ft.sounds[e].stop()},this.pause=function(e){return q(e)?ft.sounds[e].pause():!1},this.pauseAll=function(){var e;for(e=ft.soundIDs.length-1;e>=0;e--)ft.sounds[ft.soundIDs[e]].pause()},this.resume=function(e){return q(e)?ft.sounds[e].resume():!1},this.resumeAll=function(){var e;for(e=ft.soundIDs.length-1;e>=0;e--)ft.sounds[ft.soundIDs[e]].resume()},this.togglePause=function(e){return q(e)?ft.sounds[e].togglePause():!1},this.setPan=function(e,t){return q(e)?ft.sounds[e].setPan(t):!1},this.setVolume=function(e,t){return q(e)?ft.sounds[e].setVolume(t):!1},this.mute=function(e){var t=0;if(e instanceof String&&(e=null),e)return q(e)?(ft._wD('soundManager.mute(): Muting "'+e+'"'),ft.sounds[e].mute()):!1;for(ft._wD("soundManager.mute(): Muting all sounds"),t=ft.soundIDs.length-1;t>=0;t--)ft.sounds[ft.soundIDs[t]].mute();return ft.muted=!0},this.muteAll=function(){ft.mute()},this.unmute=function(e){if(e instanceof String&&(e=null),e)return q(e)?(ft._wD('soundManager.unmute(): Unmuting "'+e+'"'),ft.sounds[e].unmute()):!1;for(ft._wD("soundManager.unmute(): Unmuting all sounds"),e=ft.soundIDs.length-1;e>=0;e--)ft.sounds[ft.soundIDs[e]].unmute();return ft.muted=!1,!0},this.unmuteAll=function(){ft.unmute()},this.toggleMute=function(e){return q(e)?ft.sounds[e].toggleMute():!1},this.getMemoryUse=function(){var e=0;return gt&&8!==d&&(e=parseInt(gt._getMemoryUse(),10)),e},this.disable=function(n){var i;if(n===t&&(n=!1),Tt)return!1;for(Tt=!0,p("shutdown",1),i=ft.soundIDs.length-1;i>=0;i--)F(ft.sounds[ft.soundIDs[i]]);return f(n),st.remove(e,"load",b),!0},this.canPlayMIME=function(e){var t;return ft.hasHTML5&&(t=et({type:e})),!t&&jt&&(t=e&&ft.ok()?!!(d>8&&e.match(rn)||e.match(ft.mimePattern)):null),t},this.canPlayURL=function(e){var t;return ft.hasHTML5&&(t=et({url:e})),!t&&jt&&(t=e&&ft.ok()?!!e.match(ft.filePattern):null),t},this.canPlayLink=function(e){return e.type!==t&&e.type&&ft.canPlayMIME(e.type)?!0:ft.canPlayURL(e.href)},this.getSoundById=function(e,t){if(!e)return null;var n=ft.sounds[e];return!n&&!t&&ft._wD('soundManager.getSoundById(): Sound "'+e+'" not found.',2),n},this.onready=function(t,n){if("function"!=typeof t)throw $("needFunction","onready");return xt&&ft._wD($("queue","onready")),n||(n=e),y("onready",t,n),_(),!0},this.ontimeout=function(t,n){if("function"!=typeof t)throw $("needFunction","ontimeout");return xt&&ft._wD($("queue","ontimeout")),n||(n=e),y("ontimeout",t,n),_({type:"ontimeout"}),!0},this._writeDebug=function(e,n){var i,r;return ft.debugMode?Kt&&ft.useConsole&&(n&&"object"==typeof n?console.log(e,n):Et[n]!==t?console[Et[n]](e):console.log(e),ft.consoleOnly)?!0:(i=a("soundmanager-debug"))?(r=bt.createElement("div"),0===++Nt%2&&(r.className="sm2-alt"),n=n===t?0:parseInt(n,10),r.appendChild(bt.createTextNode(e)),n&&(n>=2&&(r.style.fontWeight="bold"),3===n&&(r.style.color="#ff3333")),i.insertBefore(r,i.firstChild),!0):!1:!1},-1!==_t.indexOf("sm2-debug=alert")&&(this._writeDebug=function(t){e.alert(t)}),this._wD=this._writeDebug,this._debug=function(){var e,t;for(p("currentObj",1),e=0,t=ft.soundIDs.length;t>e;e++)ft.sounds[ft.soundIDs[e]]._debug()},this.reboot=function(t,n){ft.soundIDs.length&&ft._wD("Destroying "+ft.soundIDs.length+" SMSound object"+(1!==ft.soundIDs.length?"s":"")+"...");var i,r,s;for(i=ft.soundIDs.length-1;i>=0;i--)ft.sounds[ft.soundIDs[i]].destruct();if(gt)try{Qt&&(Mt=gt.innerHTML),Dt=gt.parentNode.removeChild(gt)}catch(o){p("badRemove",2)}if(Mt=Dt=jt=gt=null,ft.enabled=D=xt=Ot=Pt=Ct=At=Tt=$t=ft.swfLoaded=!1,ft.soundIDs=[],ft.sounds={},Ht=0,t)wt=[];else for(i in wt)if(wt.hasOwnProperty(i))for(r=0,s=wt[i].length;s>r;r++)wt[i][r].fired=!1;return n||ft._wD("soundManager: Rebooting..."),ft.html5={usingFlash:null},ft.flash={},ft.html5Only=!1,ft.ignoreFlash=!1,e.setTimeout(function(){S(),n||ft.beginDelayedInit()},20),ft},this.reset=function(){return p("reset"),ft.reboot(!0,!0)},this.getMoviePercent=function(){return gt&&"PercentLoaded"in gt?gt.PercentLoaded():null},this.beginDelayedInit=function(){St=!0,N(),setTimeout(function(){return Pt?!1:(O(),T(),Pt=!0)},20),w()},this.destruct=function(){ft._wD("soundManager.destruct()"),ft.disable(!0)},o=function(e){var n,i,r,s,o,a,l,c,u,f,g,v=this,y=!1,_=[],b=0,w=null;i=n=null,this.sID=this.id=e.id,this.url=e.url,this._iO=this.instanceOptions=this.options=m(e),this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,g=this.url?!1:!0,this.id3={},this._debug=function(){ft._wD(v.id+": Merged options:",v.options)},this.load=function(e){var n,i=null;if(e!==t?v._iO=m(e,v.options):(e=v.options,v._iO=e,w&&w!==v.url&&(p("manURL"),v._iO.url=v.url,v.url=null)),v._iO.url||(v._iO.url=v.url),v._iO.url=K(v._iO.url),n=v.instanceOptions=v._iO,ft._wD(v.id+": load ("+n.url+")"),!n.url&&!v.url)return ft._wD(v.id+": load(): url is unassigned. Exiting.",2),v;if(!v.isHTML5&&8===d&&!v.url&&!n.autoPlay&&ft._wD(v.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),n.url===v.url&&0!==v.readyState&&2!==v.readyState)return p("onURL",1),3===v.readyState&&n.onload&&pt(v,function(){n.onload.apply(v,[!!v.duration])}),v;if(v.loaded=!1,v.readyState=1,v.playState=0,v.id3={},Z(n))i=v._setup_html5(n),i._called_load?ft._wD(v.id+": Ignoring request to load again"):(v._html5_canplay=!1,v.url!==n.url&&(ft._wD(p("manURL")+": "+n.url),v._a.src=n.url,v.setPosition(0)),v._a.autobuffer="auto",v._a.preload="auto",v._a._called_load=!0,n.autoPlay&&v.play());else{if(ft.html5Only)return ft._wD(v.id+": No flash support. Exiting."),v;if(v._iO.url&&v._iO.url.match(/data\:/i))return ft._wD(v.id+": data: URIs not supported via Flash. Exiting."),v;try{v.isHTML5=!1,v._iO=z(Q(n)),n=v._iO,8===d?gt._load(v.id,n.url,n.stream,n.autoPlay,n.usePolicyFile):gt._load(v.id,n.url,!!n.stream,!!n.autoPlay,n.loops||1,!!n.autoLoad,n.usePolicyFile)}catch(r){p("smError",2),h("onload",!1),P({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return v.url=n.url,v},this.unload=function(){return 0!==v.readyState&&(ft._wD(v.id+": unload()"),v.isHTML5?(a(),v._a&&(v._a.pause(),w=nt(v._a))):8===d?gt._unload(v.id,"about:blank"):gt._unload(v.id),r()),v},this.destruct=function(e){ft._wD(v.id+": Destruct"),v.isHTML5?(a(),v._a&&(v._a.pause(),nt(v._a),$t||o(),v._a._s=null,v._a=null)):(v._iO.onfailure=null,gt._destroySound(v.id)),e||ft.destroySound(v.id,!0)},this.start=this.play=function(e,n){var i,r,s,o,a,u=!0,u=null;if(i=v.id+": play(): ",n=n===t?!0:n,e||(e={}),v.url&&(v._iO.url=v.url),v._iO=m(v._iO,v.options),v._iO=m(e,v._iO),v._iO.url=K(v._iO.url),v.instanceOptions=v._iO,!v.isHTML5&&v._iO.serverURL&&!v.connected)return v.getAutoPlay()||(ft._wD(i+" Netstream not connected yet - setting autoPlay"),v.setAutoPlay(!0)),v;if(Z(v._iO)&&(v._setup_html5(v._iO),l()),1===v.playState&&!v.paused&&((r=v._iO.multiShot)?ft._wD(i+"Already playing (multi-shot)",1):(ft._wD(i+"Already playing (one-shot)",1),v.isHTML5&&v.setPosition(v._iO.position),u=v)),null!==u)return u;if(e.url&&e.url!==v.url&&(v.readyState||v.isHTML5||8!==d||!g?v.load(v._iO):g=!1),v.loaded?ft._wD(i.substr(0,i.lastIndexOf(":"))):0===v.readyState?(ft._wD(i+"Attempting to load"),v.isHTML5||ft.html5Only?v.isHTML5?v.load(v._iO):(ft._wD(i+"Unsupported type. Exiting."),u=v):(v._iO.autoPlay=!0,v.load(v._iO)),v.instanceOptions=v._iO):2===v.readyState?(ft._wD(i+"Could not load - exiting",2),u=v):ft._wD(i+"Loading - attempting to play..."),null!==u)return u;if(!v.isHTML5&&9===d&&0<v.position&&v.position===v.duration&&(ft._wD(i+"Sound at end, resetting to position:0"),e.position=0),v.paused&&0<=v.position&&(!v._iO.serverURL||0<v.position))ft._wD(i+"Resuming from paused state",1),v.resume();else{if(v._iO=m(e,v._iO),null!==v._iO.from&&null!==v._iO.to&&0===v.instanceCount&&0===v.playState&&!v._iO.serverURL){if(r=function(){v._iO=m(e,v._iO),v.play(v._iO)},v.isHTML5&&!v._html5_canplay?(ft._wD(i+"Beginning load for from/to case"),v.load({oncanplay:r}),u=!1):v.isHTML5||v.loaded||v.readyState&&2===v.readyState||(ft._wD(i+"Preloading for from/to case"),v.load({onload:r}),u=!1),null!==u)return u;v._iO=f()}(!v.instanceCount||v._iO.multiShotEvents||v.isHTML5&&v._iO.multiShot&&!$t||!v.isHTML5&&d>8&&!v.getAutoPlay())&&v.instanceCount++,v._iO.onposition&&0===v.playState&&c(v),v.playState=1,v.paused=!1,v.position=v._iO.position===t||isNaN(v._iO.position)?0:v._iO.position,v.isHTML5||(v._iO=z(Q(v._iO))),v._iO.onplay&&n&&(v._iO.onplay.apply(v),y=!0),v.setVolume(v._iO.volume,!0),v.setPan(v._iO.pan,!0),v.isHTML5?2>v.instanceCount?(l(),i=v._setup_html5(),v.setPosition(v._iO.position),i.play()):(ft._wD(v.id+": Cloning Audio() for instance #"+v.instanceCount+"..."),s=new Audio(v._iO.url),o=function(){st.remove(s,"onended",o),v._onfinish(v),nt(s),s=null},a=function(){st.remove(s,"canplay",a);try{s.currentTime=v._iO.position/1e3}catch(e){W(v.id+": multiShot play() failed to apply position of "+v._iO.position/1e3)}s.play()},st.add(s,"ended",o),v._iO.position?st.add(s,"canplay",a):s.play()):(u=gt._start(v.id,v._iO.loops||1,9===d?v.position:v.position/1e3,v._iO.multiShot||!1),9===d&&!u&&(ft._wD(i+"No sound hardware, or 32-sound ceiling hit",2),v._iO.onplayerror&&v._iO.onplayerror.apply(v)))}return v},this.stop=function(e){var t=v._iO;return 1===v.playState&&(ft._wD(v.id+": stop()"),v._onbufferchange(0),v._resetOnPosition(0),v.paused=!1,v.isHTML5||(v.playState=0),u(),t.to&&v.clearOnPosition(t.to),v.isHTML5?v._a&&(e=v.position,v.setPosition(0),v.position=e,v._a.pause(),v.playState=0,v._onTimer(),a()):(gt._stop(v.id,e),t.serverURL&&v.unload()),v.instanceCount=0,v._iO={},t.onstop&&t.onstop.apply(v)),v},this.setAutoPlay=function(e){ft._wD(v.id+": Autoplay turned "+(e?"on":"off")),v._iO.autoPlay=e,v.isHTML5||(gt._setAutoPlay(v.id,e),e&&!v.instanceCount&&1===v.readyState&&(v.instanceCount++,ft._wD(v.id+": Incremented instance count to "+v.instanceCount)))},this.getAutoPlay=function(){return v._iO.autoPlay},this.setPosition=function(e){e===t&&(e=0);var n=v.isHTML5?Math.max(e,0):Math.min(v.duration||v._iO.duration,Math.max(e,0));if(v.position=n,e=v.position/1e3,v._resetOnPosition(v.position),v._iO.position=n,v.isHTML5){if(v._a){if(v._html5_canplay){if(v._a.currentTime!==e){ft._wD(v.id+": setPosition("+e+")");try{v._a.currentTime=e,(0===v.playState||v.paused)&&v._a.pause()}catch(i){ft._wD(v.id+": setPosition("+e+") failed: "+i.message,2)}}}else if(e)return ft._wD(v.id+": setPosition("+e+"): Cannot seek yet, sound not ready",2),v;v.paused&&v._onTimer(!0)}}else e=9===d?v.position:e,v.readyState&&2!==v.readyState&&gt._setPosition(v.id,e,v.paused||!v.playState,v._iO.multiShot);return v},this.pause=function(e){return v.paused||0===v.playState&&1!==v.readyState?v:(ft._wD(v.id+": pause()"),v.paused=!0,v.isHTML5?(v._setup_html5().pause(),a()):(e||e===t)&&gt._pause(v.id,v._iO.multiShot),v._iO.onpause&&v._iO.onpause.apply(v),v)},this.resume=function(){var e=v._iO;return v.paused?(ft._wD(v.id+": resume()"),v.paused=!1,v.playState=1,v.isHTML5?(v._setup_html5().play(),l()):(e.isMovieStar&&!e.serverURL&&v.setPosition(v.position),gt._pause(v.id,e.multiShot)),!y&&e.onplay?(e.onplay.apply(v),y=!0):e.onresume&&e.onresume.apply(v),v):v},this.togglePause=function(){return ft._wD(v.id+": togglePause()"),0===v.playState?(v.play({position:9!==d||v.isHTML5?v.position/1e3:v.position}),v):(v.paused?v.resume():v.pause(),v)},this.setPan=function(e,n){return e===t&&(e=0),n===t&&(n=!1),v.isHTML5||gt._setPan(v.id,e),v._iO.pan=e,n||(v.pan=e,v.options.pan=e),v},this.setVolume=function(e,n){return e===t&&(e=100),n===t&&(n=!1),v.isHTML5?v._a&&(v._a.volume=Math.max(0,Math.min(1,e/100))):gt._setVolume(v.id,ft.muted&&!v.muted||v.muted?0:e),v._iO.volume=e,n||(v.volume=e,v.options.volume=e),v},this.mute=function(){return v.muted=!0,v.isHTML5?v._a&&(v._a.muted=!0):gt._setVolume(v.id,0),v},this.unmute=function(){v.muted=!1;var e=v._iO.volume!==t;return v.isHTML5?v._a&&(v._a.muted=!1):gt._setVolume(v.id,e?v._iO.volume:v.options.volume),v},this.toggleMute=function(){return v.muted?v.unmute():v.mute()},this.onposition=this.onPosition=function(e,n,i){return _.push({position:parseInt(e,10),method:n,scope:i!==t?i:v,fired:!1}),v},this.clearOnPosition=function(e,t){var n;if(e=parseInt(e,10),isNaN(e))return!1;for(n=0;n<_.length;n++)e!==_[n].position||t&&t!==_[n].method||(_[n].fired&&b--,_.splice(n,1))},this._processOnPosition=function(){var e,t;if(e=_.length,!e||!v.playState||b>=e)return!1;for(e-=1;e>=0;e--)t=_[e],!t.fired&&v.position>=t.position&&(t.fired=!0,b++,t.method.apply(t.scope,[t.position]));return!0},this._resetOnPosition=function(e){var t,n;if(t=_.length,!t)return!1;for(t-=1;t>=0;t--)n=_[t],n.fired&&e<=n.position&&(n.fired=!1,b--);return!0},f=function(){var e,t,n=v._iO,i=n.from,r=n.to;return t=function(){ft._wD(v.id+': "To" time of '+r+" reached."),v.clearOnPosition(r,t),v.stop()},e=function(){ft._wD(v.id+': Playing "from" '+i),null===r||isNaN(r)||v.onPosition(r,t)},null!==i&&!isNaN(i)&&(n.position=i,n.multiShot=!1,e()),n},c=function(){var e,t=v._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&v.onPosition(parseInt(e,10),t[e])},u=function(){var e,t=v._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&v.clearOnPosition(parseInt(e,10))},l=function(){v.isHTML5&&V(v)},a=function(){v.isHTML5&&G(v)},r=function(e){e||(_=[],b=0),y=!1,v._hasTimer=null,v._a=null,v._html5_canplay=!1,v.bytesLoaded=null,v.bytesTotal=null,v.duration=v._iO&&v._iO.duration?v._iO.duration:null,v.durationEstimate=null,v.buffered=[],v.eqData=[],v.eqData.left=[],v.eqData.right=[],v.failures=0,v.isBuffering=!1,v.instanceOptions={},v.instanceCount=0,v.loaded=!1,v.metadata={},v.readyState=0,v.muted=!1,v.paused=!1,v.peakData={left:0,right:0},v.waveformData={left:[],right:[]},v.playState=0,v.position=null,v.id3={}},r(),this._onTimer=function(e){var t,r=!1,s={};return v._hasTimer||e?(v._a&&(e||(0<v.playState||1===v.readyState)&&!v.paused)&&(t=v._get_html5_duration(),t!==n&&(n=t,v.duration=t,r=!0),v.durationEstimate=v.duration,t=1e3*v._a.currentTime||0,t!==i&&(i=t,r=!0),(r||e)&&v._whileplaying(t,s,s,s,s)),r):void 0},this._get_html5_duration=function(){var e=v._iO;return(e=v._a&&v._a.duration?1e3*v._a.duration:e&&e.duration?e.duration:null)&&!isNaN(e)&&1/0!==e?e:null},this._apply_loop=function(e,t){!e.loop&&t>1&&ft._wD("Note: Native HTML5 looping is infinite.",1),e.loop=t>1?"loop":""},this._setup_html5=function(e){e=m(v._iO,e);var t,n=$t?mt:v._a,i=decodeURI(e.url);if($t?i===decodeURI(ot)&&(t=!0):i===decodeURI(w)&&(t=!0),n){if(n._s)if($t)n._s&&n._s.playState&&!t&&n._s.stop();else if(!$t&&i===decodeURI(w))return v._apply_loop(n,e.loops),n;t||(r(!1),n.src=e.url,ot=w=v.url=e.url,n._called_load=!1)}else v._a=e.autoLoad||e.autoPlay?new Audio(e.url):qt&&10>opera.version()?new Audio(null):new Audio,n=v._a,n._called_load=!1,$t&&(mt=n);return v.isHTML5=!0,v._a=n,n._s=v,s(),v._apply_loop(n,e.loops),e.autoLoad||e.autoPlay?v.load():(n.autobuffer=!1,n.preload="auto"),n},s=function(){if(v._a._added_events)return!1;var e;v._a._added_events=!0;for(e in ut)ut.hasOwnProperty(e)&&v._a&&v._a.addEventListener(e,ut[e],!1);return!0},o=function(){var e;ft._wD(v.id+": Removing event listeners"),v._a._added_events=!1;for(e in ut)ut.hasOwnProperty(e)&&v._a&&v._a.removeEventListener(e,ut[e],!1)},this._onload=function(e){var t=!!e||!v.isHTML5&&8===d&&v.duration;return e=v.id+": ",ft._wD(e+(t?"onload()":"Failed to load / invalid sound?"+(v.duration?" -":" Zero-length duration reported.")+" ("+v.url+")"),t?1:2),!t&&!v.isHTML5&&(!0===ft.sandbox.noRemote&&ft._wD(e+$("noNet"),1),!0===ft.sandbox.noLocal&&ft._wD(e+$("noLocal"),1)),v.loaded=t,v.readyState=t?3:2,v._onbufferchange(0),v._iO.onload&&pt(v,function(){v._iO.onload.apply(v,[t])}),!0},this._onbufferchange=function(e){return 0===v.playState||e&&v.isBuffering||!e&&!v.isBuffering?!1:(v.isBuffering=1===e,v._iO.onbufferchange&&(ft._wD(v.id+": Buffer state change: "+e),v._iO.onbufferchange.apply(v)),!0)},this._onsuspend=function(){return v._iO.onsuspend&&(ft._wD(v.id+": Playback suspended"),v._iO.onsuspend.apply(v)),!0},this._onfailure=function(e,t,n){v.failures++,ft._wD(v.id+": Failures = "+v.failures),v._iO.onfailure&&1===v.failures?v._iO.onfailure(v,e,t,n):ft._wD(v.id+": Ignoring failure")},this._onfinish=function(){var e=v._iO.onfinish;v._onbufferchange(0),v._resetOnPosition(0),v.instanceCount&&(v.instanceCount--,v.instanceCount||(u(),v.playState=0,v.paused=!1,v.instanceCount=0,v.instanceOptions={},v._iO={},a(),v.isHTML5&&(v.position=0)),(!v.instanceCount||v._iO.multiShotEvents)&&e)&&(ft._wD(v.id+": onfinish()"),pt(v,function(){e.apply(v)}))},this._whileloading=function(e,t,n,i){var r=v._iO;v.bytesLoaded=e,v.bytesTotal=t,v.duration=Math.floor(n),v.bufferLength=i,v.durationEstimate=v.isHTML5||r.isMovieStar?v.duration:r.duration?v.duration>r.duration?v.duration:r.duration:parseInt(v.bytesTotal/v.bytesLoaded*v.duration,10),v.isHTML5||(v.buffered=[{start:0,end:v.duration}]),(3!==v.readyState||v.isHTML5)&&r.whileloading&&r.whileloading.apply(v)},this._whileplaying=function(e,n,i,r,s){var o=v._iO;return isNaN(e)||null===e?!1:(v.position=Math.max(0,e),v._processOnPosition(),!v.isHTML5&&d>8&&(o.usePeakData&&n!==t&&n&&(v.peakData={left:n.leftPeak,right:n.rightPeak}),o.useWaveformData&&i!==t&&i&&(v.waveformData={left:i.split(","),right:r.split(",")}),o.useEQData&&s!==t&&s&&s.leftEQ&&(e=s.leftEQ.split(","),v.eqData=e,v.eqData.left=e,s.rightEQ!==t&&s.rightEQ&&(v.eqData.right=s.rightEQ.split(",")))),1===v.playState&&(!v.isHTML5&&8===d&&!v.position&&v.isBuffering&&v._onbufferchange(0),o.whileplaying&&o.whileplaying.apply(v)),!0)},this._oncaptiondata=function(e){ft._wD(v.id+": Caption data received."),v.captiondata=e,v._iO.oncaptiondata&&v._iO.oncaptiondata.apply(v,[e])},this._onmetadata=function(e,t){ft._wD(v.id+": Metadata received.");var n,i,r={};for(n=0,i=e.length;i>n;n++)r[e[n]]=t[n];v.metadata=r,v._iO.onmetadata&&v._iO.onmetadata.apply(v)},this._onid3=function(e,t){ft._wD(v.id+": ID3 data received.");var n,i,r=[];for(n=0,i=e.length;i>n;n++)r[e[n]]=t[n];v.id3=m(v.id3,r),v._iO.onid3&&v._iO.onid3.apply(v)},this._onconnect=function(e){e=1===e,ft._wD(v.id+": "+(e?"Connected.":"Failed to connect? - "+v.url),e?1:2),(v.connected=e)&&(v.failures=0,q(v.id)&&(v.getAutoPlay()?v.play(t,v.getAutoPlay()):v._iO.autoLoad&&v.load()),v._iO.onconnect&&v._iO.onconnect.apply(v,[e]))},this._ondataerror=function(e){0<v.playState&&(ft._wD(v.id+": Data error: "+e),v._iO.ondataerror&&v._iO.ondataerror.apply(v))},this._debug()},M=function(){return bt.body||bt._docElement||bt.getElementsByTagName("div")[0]},a=function(e){return bt.getElementById(e)},m=function(e,n){var i,r,s=e||{};i=n===t?ft.defaultOptions:n;for(r in i)i.hasOwnProperty(r)&&s[r]===t&&(s[r]="object"!=typeof i[r]||null===i[r]?i[r]:m(s[r],i[r]));return s},pt=function(t,n){t.isHTML5||8!==d?n():e.setTimeout(n,0)},v={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},g=function(e,n){var i,r=!0,s=n!==t,o=ft.setupOptions;if(e===t){r=[];for(i in o)o.hasOwnProperty(i)&&r.push(i);for(i in v)v.hasOwnProperty(i)&&("object"==typeof ft[i]?r.push(i+": {...}"):ft[i]instanceof Function?r.push(i+": function() {...}"):r.push(i));return ft._wD($("setup",r.join(", "))),!1}for(i in e)if(e.hasOwnProperty(i))if("object"!=typeof e[i]||null===e[i]||e[i]instanceof Array||e[i]instanceof RegExp)s&&v[n]!==t?ft[n][i]=e[i]:o[i]!==t?(ft.setupOptions[i]=e[i],ft[i]=e[i]):v[i]===t?(W($(ft[i]===t?"setupUndef":"setupError",i),2),r=!1):ft[i]instanceof Function?ft[i].apply(ft,e[i]instanceof Array?e[i]:[e[i]]):ft[i]=e[i];else{if(v[i]!==t)return g(e[i],i);W($(ft[i]===t?"setupUndef":"setupError",i),2),r=!1}return r},st=function(){function t(e){e=Lt.call(e);var t=e.length;return i?(e[1]="on"+e[1],t>3&&e.pop()):3===t&&e.push(!1),e}function n(e,t){var n=e.shift(),s=[r[t]];i?n[s](e[0],e[1]):n[s].apply(n,e)}var i=e.attachEvent,r={add:i?"attachEvent":"addEventListener",remove:i?"detachEvent":"removeEventListener"};return{add:function(){n(t(arguments),"add")},remove:function(){n(t(arguments),"remove")}}}(),ut={abort:s(function(){ft._wD(this._s.id+": abort")}),canplay:s(function(){var e,n=this._s;if(n._html5_canplay)return!0;if(n._html5_canplay=!0,ft._wD(n.id+": canplay"),n._onbufferchange(0),e=n._iO.position===t||isNaN(n._iO.position)?null:n._iO.position/1e3,n.position&&this.currentTime!==e){ft._wD(n.id+": canplay: Setting position to "+e);try{this.currentTime=e}catch(i){ft._wD(n.id+": canplay: Setting position of "+e+" failed: "+i.message,2)}}n._iO._oncanplay&&n._iO._oncanplay()}),canplaythrough:s(function(){var e=this._s;e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration()),e._onload(!0))}),ended:s(function(){var e=this._s;ft._wD(e.id+": ended"),e._onfinish()}),error:s(function(){ft._wD(this._s.id+": HTML5 error, code "+this.error.code),this._s._onload(!1)}),loadeddata:s(function(){var e=this._s;ft._wD(e.id+": loadeddata"),!e._loaded&&!Wt&&(e.duration=e._get_html5_duration())}),loadedmetadata:s(function(){ft._wD(this._s.id+": loadedmetadata")}),loadstart:s(function(){ft._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:s(function(){this._s._onbufferchange(0)}),playing:s(function(){ft._wD(this._s.id+": playing"),this._s._onbufferchange(0)}),progress:s(function(e){var t,n,i,r=this._s;t=0;var s="progress"===e.type,o=e.target.buffered,a=e.loaded||0,l=e.total||1;if(r.buffered=[],o&&o.length){for(t=0,n=o.length;n>t;t++)r.buffered.push({start:1e3*o.start(t),end:1e3*o.end(t)});if(t=1e3*(o.end(0)-o.start(0)),a=Math.min(1,t/(1e3*e.target.duration)),s&&1<o.length){for(i=[],n=o.length,t=0;n>t;t++)i.push(1e3*e.target.buffered.start(t)+"-"+1e3*e.target.buffered.end(t));ft._wD(this._s.id+": progress, timeRanges: "+i.join(", "))}s&&!isNaN(a)&&ft._wD(this._s.id+": progress, "+Math.floor(100*a)+"% loaded")}isNaN(a)||(r._onbufferchange(0),r._whileloading(a,l,r._get_html5_duration()),a&&l&&a===l&&ut.canplaythrough.call(this,e))}),ratechange:s(function(){ft._wD(this._s.id+": ratechange")}),suspend:s(function(e){var t=this._s;ft._wD(this._s.id+": suspend"),ut.progress.call(this,e),t._onsuspend()}),stalled:s(function(){ft._wD(this._s.id+": stalled")}),timeupdate:s(function(){this._s._onTimer()}),waiting:s(function(){var e=this._s;ft._wD(this._s.id+": waiting"),e._onbufferchange(1)})},Z=function(e){return e&&(e.type||e.url||e.serverURL)?e.serverURL||e.type&&r(e.type)?!1:e.type?et({type:e.type}):et({url:e.url})||ft.html5Only||e.url.match(/data\:/i):!1},nt=function(e){var t;return e&&(t=Wt&&!Bt?null:Vt?"about:blank":null,e.src=t,void 0!==e._called_unload&&(e._called_load=!1)),$t&&(ot=null),t},et=function(e){if(!ft.useHTML5Audio||!ft.hasHTML5)return!1;var n=e.url||null;e=e.type||null;var i,s=ft.audioFormats;if(e&&ft.html5[e]!==t)return ft.html5[e]&&!r(e);if(!tt){tt=[];for(i in s)s.hasOwnProperty(i)&&(tt.push(i),s[i].related&&(tt=tt.concat(s[i].related)));tt=RegExp("\\.("+tt.join("|")+")(\\?.*)?$","i")}return i=n?n.toLowerCase().match(tt):null,i&&i.length?i=i[1]:e&&(n=e.indexOf(";"),i=(-1!==n?e.substr(0,n):e).substr(6)),i&&ft.html5[i]!==t?n=ft.html5[i]&&!r(i):(e="audio/"+i,n=ft.html5.canPlayType({type:e}),n=(ft.html5[i]=n)&&ft.html5[e]&&!r(e)),n},rt=function(){function e(e){var t,n,i=t=!1;
if(!s||"function"!=typeof s.canPlayType)return t;if(e instanceof Array){for(t=0,n=e.length;n>t;t++)(ft.html5[e[t]]||s.canPlayType(e[t]).match(ft.html5Test))&&(i=!0,ft.html5[e[t]]=!0,ft.flash[e[t]]=!!e[t].match(en));t=i}else e=s&&"function"==typeof s.canPlayType?s.canPlayType(e):!1,t=!(!e||!e.match(ft.html5Test));return t}if(!ft.useHTML5Audio||!ft.hasHTML5)return jt=ft.html5.usingFlash=!0,!1;var n,i,r,s=Audio!==t?qt&&10>opera.version()?new Audio(null):new Audio:null,o={};r=ft.audioFormats;for(n in r)if(r.hasOwnProperty(n)&&(i="audio/"+n,o[n]=e(r[n].type),o[i]=o[n],n.match(en)?(ft.flash[n]=!0,ft.flash[i]=!0):(ft.flash[n]=!1,ft.flash[i]=!1),r[n]&&r[n].related))for(i=r[n].related.length-1;i>=0;i--)o["audio/"+r[n].related[i]]=o[n],ft.html5[r[n].related[i]]=o[n],ft.flash[r[n].related[i]]=o[n];return o.canPlayType=s?e:null,ft.html5=m(ft.html5,o),ft.html5.usingFlash=J(),jt=ft.html5.usingFlash,!0},x={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:"soundManagerexception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:"soundManager: Verify that %s is a valid path.",tryDebug:"Try soundManager.debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:"soundManager: Non-HTTP page ("+bt.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:"soundManager: Special case: Waiting for SWF to load with window focus...",waitForever:"soundManager: Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:"soundManager: Waiting for 100% SWF load...",needFunction:"soundManager: Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"soundManager: _debug(): Current sound objects",waitOnload:"soundManager: Waiting for window.onload()",docLoaded:"soundManager: Document already loaded",onload:"soundManager: initComplete(): calling soundManager.onload()",onloadOK:"soundManager.onload() complete",didInit:"soundManager: init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"soundManager: Failed to remove Flash node.",shutdown:"soundManager.disable(): Shutting down",queue:"soundManager: Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying .swf_timedout CSS...",fbLoaded:"Flash loaded",fbHandler:"soundManager: flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:"soundManager.load(): current URL already assigned.",badFV:'soundManager.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:"soundManager: Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:"soundManager: Got window focus.",policy:"Enabling usePolicyFile for data access",setup:"soundManager.setup(): allowed parameters: %s",setupError:'soundManager.setup(): "%s" cannot be assigned with this method.',setupUndef:'soundManager.setup(): Could not find option "%s"',setupLate:"soundManager.setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:"soundManager: Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready.",reset:"soundManager.reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device."},$=function(){var e,t,n=Lt.call(arguments),i=n.shift(),i=x&&x[i]?x[i]:"";if(i&&n&&n.length)for(e=0,t=n.length;t>e;e++)i=i.replace("%s",n[e]);return i},Q=function(e){return 8===d&&1<e.loops&&e.stream&&(p("as2loop"),e.stream=!1),e},z=function(e,t){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(ft._wD((t||"")+$("policy")),e.usePolicyFile=!0),e},W=function(e){Kt&&console.warn!==t?console.warn(e):ft._wD(e)},l=function(){return!1},F=function(e){for(var t in e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&(e[t]=l)},j=function(e){e===t&&(e=!1),(Tt||e)&&ft.disable(e)},L=function(e){var t=null;if(e)if(e.match(/\.swf(\?.*)?$/i)){if(t=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return e=(e&&-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")+1):"./")+ft.movieURL,ft.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},C=function(){d=parseInt(ft.flashVersion,10),8!==d&&9!==d&&(ft._wD($("badFV",d,8)),ft.flashVersion=d=8);var e=ft.debugMode||ft.debugFlash?"_debug.swf":".swf";ft.useHTML5Audio&&!ft.html5Only&&ft.audioFormats.mp4.required&&9>d&&(ft._wD($("needfl9")),ft.flashVersion=d=9),ft.version=ft.versionNumber+(ft.html5Only?" (HTML5-only mode)":9===d?" (AS3/Flash 9)":" (AS2/Flash 8)"),d>8?(ft.defaultOptions=m(ft.defaultOptions,ft.flash9Options),ft.features.buffering=!0,ft.defaultOptions=m(ft.defaultOptions,ft.movieStarOptions),ft.filePatterns.flash9=RegExp("\\.(mp3|"+sn.join("|")+")(\\?.*)?$","i"),ft.features.movieStar=!0):ft.features.movieStar=!1,ft.filePattern=ft.filePatterns[8!==d?"flash9":"flash8"],ft.movieURL=(8===d?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),ft.features.peakData=ft.features.waveformData=ft.features.eqData=d>8},I=function(e,t){return gt?(gt._setPolling(e,t),void 0):!1},R=function(){if(ft.debugURLParam.test(_t)&&(ft.debugMode=!0),a(ft.debugID))return!1;var e,t,n,i;if(!(!ft.debugMode||a(ft.debugID)||Kt&&ft.useConsole&&ft.consoleOnly)){e=bt.createElement("div"),e.id=ft.debugID+"-toggle",t={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},e.appendChild(bt.createTextNode("-")),e.onclick=U,e.title="Toggle SM2 debug console",yt.match(/msie 6/i)&&(e.style.position="absolute",e.style.cursor="hand");for(i in t)t.hasOwnProperty(i)&&(e.style[i]=t[i]);if(t=bt.createElement("div"),t.id=ft.debugID,t.style.display=ft.debugMode?"block":"none",ft.debugMode&&!a(e.id)){try{n=M(),n.appendChild(e)}catch(r){throw Error($("domError")+" \n"+r.toString())}n.appendChild(t)}}},q=this.getSoundById,p=function(e,t){return e?ft._wD($(e),t):""},U=function(){var e=a(ft.debugID),t=a(ft.debugID+"-toggle");return e?(kt?(t.innerHTML="+",e.style.display="none"):(t.innerHTML="-",e.style.display="block"),kt=!kt,void 0):!1},h=function(n,i,r){if(e.sm2Debugger!==t)try{sm2Debugger.handleEvent(n,i,r)}catch(s){return!1}return!0},B=function(){var e=[];return ft.debugMode&&e.push("sm2_debug"),ft.debugFlash&&e.push("flash_debug"),ft.useHighPerformance&&e.push("high_performance"),e.join(" ")},H=function(){var e=$("fbHandler"),t=ft.getMoviePercent(),n={type:"FLASHBLOCK"};return ft.html5Only?!1:(ft.ok()?(ft.didFlashBlock&&ft._wD(e+": Unblocked"),ft.oMC&&(ft.oMC.className=[B(),"movieContainer","swf_loaded"+(ft.didFlashBlock?" swf_unblocked":"")].join(" "))):(jt&&(ft.oMC.className=B()+" movieContainer "+(null===t?"swf_timedout":"swf_error"),ft._wD(e+": "+$("fbTimeout")+(t?" ("+$("fbLoaded")+")":""))),ft.didFlashBlock=!0,_({type:"ontimeout",ignoreInit:!0,error:n}),P(n)),void 0)},y=function(e,n,i){wt[e]===t&&(wt[e]=[]),wt[e].push({method:n,scope:i||null,fired:!1})},_=function(e){if(e||(e={type:ft.ok()?"onready":"ontimeout"}),!xt&&e&&!e.ignoreInit||"ontimeout"===e.type&&(ft.ok()||Tt&&!e.ignoreInit))return!1;var t,n={success:e&&e.ignoreInit?ft.ok():!Tt},i=e&&e.type?wt[e.type]||[]:[],r=[],n=[n],s=jt&&!ft.ok();for(e.error&&(n[0].error=e.error),e=0,t=i.length;t>e;e++)!0!==i[e].fired&&r.push(i[e]);if(r.length)for(e=0,t=r.length;t>e;e++)r[e].scope?r[e].method.apply(r[e].scope,n):r[e].method.apply(this,n),s||(r[e].fired=!0);return!0},b=function(){e.setTimeout(function(){ft.useFlashBlock&&H(),_(),"function"==typeof ft.onload&&(p("onload",1),ft.onload.apply(e),p("onloadOK",1)),ft.waitForWindowLoad&&st.add(e,"load",b)},1)},lt=function(){if(at!==t)return at;var n,i=!1,r=navigator,s=r.plugins,o=e.ActiveXObject;if(s&&s.length)(r=r.mimeTypes)&&r["application/x-shockwave-flash"]&&r["application/x-shockwave-flash"].enabledPlugin&&r["application/x-shockwave-flash"].enabledPlugin.description&&(i=!0);else if(o!==t&&!yt.match(/MSAppHost/i)){try{n=new o("ShockwaveFlash.ShockwaveFlash")}catch(a){n=null}i=!!n}return at=i},J=function(){var e,t,n=ft.audioFormats;if(Bt&&yt.match(/os (1|2|3_0|3_1)/i)?(ft.hasHTML5=!1,ft.html5Only=!0,ft.oMC&&(ft.oMC.style.display="none")):ft.useHTML5Audio&&(ft.html5&&ft.html5.canPlayType||(ft._wD("SoundManager: No HTML5 Audio() support detected."),ft.hasHTML5=!1),Yt&&ft._wD("soundManager: Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(at?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),ft.useHTML5Audio&&ft.hasHTML5)for(t in X=!0,n)n.hasOwnProperty(t)&&n[t].required&&(ft.html5.canPlayType(n[t].type)?ft.preferFlash&&(ft.flash[t]||ft.flash[n[t].type])&&(e=!0):(X=!1,e=!0));return ft.ignoreFlash&&(e=!1,X=!0),ft.html5Only=ft.hasHTML5&&ft.useHTML5Audio&&!e,!ft.html5Only},K=function(e){var t,n,i=0;if(e instanceof Array){for(t=0,n=e.length;n>t;t++)if(e[t]instanceof Object){if(ft.canPlayMIME(e[t].type)){i=t;break}}else if(ft.canPlayURL(e[t])){i=t;break}e[i].url&&(e[i]=e[i].url),e=e[i]}return e},V=function(e){e._hasTimer||(e._hasTimer=!0,!Gt&&ft.html5PollingInterval&&(null===Rt&&0===It&&(Rt=setInterval(Y,ft.html5PollingInterval)),It++))},G=function(e){e._hasTimer&&(e._hasTimer=!1,!Gt&&ft.html5PollingInterval&&It--)},Y=function(){var e;if(null!==Rt&&!It)return clearInterval(Rt),Rt=null,!1;for(e=ft.soundIDs.length-1;e>=0;e--)ft.sounds[ft.soundIDs[e]].isHTML5&&ft.sounds[ft.soundIDs[e]]._hasTimer&&ft.sounds[ft.soundIDs[e]]._onTimer()},P=function(n){n=n!==t?n:{},"function"==typeof ft.onerror&&ft.onerror.apply(e,[{type:n.type!==t?n.type:null}]),n.fatal!==t&&n.fatal&&ft.disable()},ct=function(){if(!Yt||!lt())return!1;var e,t,n=ft.audioFormats;for(t in n)if(n.hasOwnProperty(t)&&("mp3"===t||"mp4"===t)&&(ft._wD("soundManager: Using flash fallback for "+t+" format"),ft.html5[t]=!1,n[t]&&n[t].related))for(e=n[t].related.length-1;e>=0;e--)ft.html5[n[t].related[e]]=!1},this._setSandboxType=function(e){var n=ft.sandbox;n.type=e,n.description=n.types[n.types[e]!==t?e:"unknown"],"localWithFile"===n.type?(n.noRemote=!0,n.noLocal=!1,p("secNote",2)):"localWithNetwork"===n.type?(n.noRemote=!1,n.noLocal=!0):"localTrusted"===n.type&&(n.noRemote=!1,n.noLocal=!1)},this._externalInterfaceOK=function(e){if(ft.swfLoaded)return!1;var t;return h("swf",!0),h("flashtojs",!0),ft.swfLoaded=!0,Jt=!1,Yt&&ct(),e&&e.replace(/\+dev/i,"")===ft.versionNumber.replace(/\+dev/i,"")?(setTimeout(u,Qt?100:1),void 0):(t='soundManager: Fatal: JavaScript file build "'+ft.versionNumber+'" does not match Flash SWF build "'+e+'" at '+ft.url+". Ensure both are up-to-date.",setTimeout(function(){throw Error(t)},0),!1)},O=function(e,n){function i(){var e,t=[],n=[];e="SoundManager "+ft.version+(!ft.html5Only&&ft.useHTML5Audio?ft.hasHTML5?" + HTML5 audio":", no HTML5 audio support":""),ft.html5Only?ft.html5PollingInterval&&t.push("html5PollingInterval ("+ft.html5PollingInterval+"ms)"):(ft.preferFlash&&t.push("preferFlash"),ft.useHighPerformance&&t.push("useHighPerformance"),ft.flashPollingInterval&&t.push("flashPollingInterval ("+ft.flashPollingInterval+"ms)"),ft.html5PollingInterval&&t.push("html5PollingInterval ("+ft.html5PollingInterval+"ms)"),ft.wmode&&t.push("wmode ("+ft.wmode+")"),ft.debugFlash&&t.push("debugFlash"),ft.useFlashBlock&&t.push("flashBlock")),t.length&&(n=n.concat([t.join(" + ")])),ft._wD(e+(n.length?" + "+n.join(", "):""),1),dt()}function r(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(Ct&&At)return!1;if(ft.html5Only)return C(),i(),ft.oMC=a(ft.movieID),u(),At=Ct=!0,!1;var s,o,l,c=n||ft.url,d=ft.altURL||c,h=M(),p=B(),f=null,f=bt.getElementsByTagName("html")[0],f=f&&f.dir&&f.dir.match(/rtl/i);if(e=e===t?ft.id:e,C(),ft.url=L(tn?c:d),n=ft.url,ft.wmode=!ft.wmode&&ft.useHighPerformance?"transparent":ft.wmode,null!==ft.wmode&&(yt.match(/msie 8/i)||!Qt&&!ft.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Ft.push(x.spcWmode),ft.wmode=null),h={name:e,id:e,src:n,quality:"high",allowScriptAccess:ft.allowScriptAccess,bgcolor:ft.bgColor,pluginspage:nn+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:ft.wmode,hasPriority:"true"},ft.debugFlash&&(h.FlashVars="debug=1"),ft.wmode||delete h.wmode,Qt)c=bt.createElement("div"),o=['<object id="'+e+'" data="'+n+'" type="'+h.type+'" title="'+h.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+nn+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',r("movie",n),r("AllowScriptAccess",ft.allowScriptAccess),r("quality",h.quality),ft.wmode?r("wmode",ft.wmode):"",r("bgcolor",ft.bgColor),r("hasPriority","true"),ft.debugFlash?r("FlashVars",h.FlashVars):"","</object>"].join("");else for(s in c=bt.createElement("embed"),h)h.hasOwnProperty(s)&&c.setAttribute(s,h[s]);if(R(),p=B(),h=M())if(ft.oMC=a(ft.movieID)||bt.createElement("div"),ft.oMC.id)l=ft.oMC.className,ft.oMC.className=(l?l+" ":"movieContainer")+(p?" "+p:""),ft.oMC.appendChild(c),Qt&&(s=ft.oMC.appendChild(bt.createElement("div")),s.className="sm2-object-box",s.innerHTML=o),At=!0;else{if(ft.oMC.id=ft.movieID,ft.oMC.className="movieContainer "+p,s=p=null,ft.useFlashBlock||(ft.useHighPerformance?p={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(p={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},f&&(p.left=Math.abs(parseInt(p.left,10))+"px"))),zt&&(ft.oMC.style.zIndex=1e4),!ft.debugFlash)for(l in p)p.hasOwnProperty(l)&&(ft.oMC.style[l]=p[l]);try{Qt||ft.oMC.appendChild(c),h.appendChild(ft.oMC),Qt&&(s=ft.oMC.appendChild(bt.createElement("div")),s.className="sm2-object-box",s.innerHTML=o),At=!0}catch(m){throw Error($("domError")+" \n"+m.toString())}}return Ct=!0,i(),!0},T=function(){return ft.html5Only?(O(),!1):gt?!1:ft.url?(gt=ft.getMovie(ft.id),gt||(Dt?(Qt?ft.oMC.innerHTML=Mt:ft.oMC.appendChild(Dt),Dt=null,Ct=!0):O(ft.id,ft.url),gt=ft.getMovie(ft.id)),"function"==typeof ft.oninitmovie&&setTimeout(ft.oninitmovie,1),ht(),!0):(p("noURL"),!1)},w=function(){setTimeout(k,1e3)},k=function(){var t,n=!1;return!ft.url||Ot?!1:(Ot=!0,st.remove(e,"load",w),Jt&&!Xt?(p("waitFocus"),!1):(xt||(t=ft.getMoviePercent(),t>0&&100>t&&(n=!0)),setTimeout(function(){return t=ft.getMoviePercent(),n?(Ot=!1,ft._wD($("waitSWF")),e.setTimeout(w,1),!1):(xt||(ft._wD("soundManager: No Flash response within expected time. Likely causes: "+(0===t?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(ft.debugFlash?" "+$("checkSWF"):""),2),!tn&&t&&(p("localFail",2),ft.debugFlash||p("tryDebug",2)),0===t&&ft._wD($("swf404",ft.url),1),h("flashtojs",!1," (Check flash security or flash blockers)")),!xt&&Zt&&(null===t?ft.useFlashBlock||0===ft.flashLoadTimeout?(ft.useFlashBlock&&H(),p("waitForever")):!ft.useFlashBlock&&X?e.setTimeout(function(){W("soundManager: useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),ft.setup({preferFlash:!1}).reboot(),ft.didFlashBlock=!0,ft.beginDelayedInit()},1):(p("waitForever"),_({type:"ontimeout",ignoreInit:!0})):0===ft.flashLoadTimeout?p("waitForever"):j(!0)),void 0)},ft.flashLoadTimeout),void 0))},A=function(){return Xt||!Jt?(st.remove(e,"focus",A),!0):(Xt=Zt=!0,p("gotFocus"),Ot=!1,w(),st.remove(e,"focus",A),!0)},ht=function(){Ft.length&&(ft._wD("SoundManager 2: "+Ft.join(" "),1),Ft=[])},dt=function(){ht();var e,t=[];if(ft.useHTML5Audio&&ft.hasHTML5){for(e in ft.audioFormats)ft.audioFormats.hasOwnProperty(e)&&t.push(e+" = "+ft.html5[e]+(!ft.html5[e]&&jt&&ft.flash[e]?" (using flash)":ft.preferFlash&&ft.flash[e]&&jt?" (preferring flash)":ft.html5[e]?"":" ("+(ft.audioFormats[e].required?"required, ":"")+"and no flash support)"));ft._wD("SoundManager 2 HTML5 support: "+t.join(", "),1)}},f=function(t){if(xt)return!1;if(ft.html5Only)return p("sm2Loaded"),xt=!0,b(),h("onload",!0),!0;var n,i=!0;return ft.useFlashBlock&&ft.flashLoadTimeout&&!ft.getMoviePercent()||(xt=!0,Tt&&(n={type:!at&&jt?"NO_FLASH":"INIT_TIMEOUT"})),ft._wD("SoundManager 2 "+(Tt?"failed to load":"loaded")+" ("+(Tt?"Flash security/load error":"OK")+")",Tt?2:1),Tt||t?(ft.useFlashBlock&&ft.oMC&&(ft.oMC.className=B()+" "+(null===ft.getMoviePercent()?"swf_timedout":"swf_error")),_({type:"ontimeout",error:n,ignoreInit:!0}),h("onload",!1),P(n),i=!1):h("onload",!0),Tt||(ft.waitForWindowLoad&&!St?(p("waitOnload"),st.add(e,"load",b)):(ft.waitForWindowLoad&&St&&p("docLoaded"),b())),i},c=function(){var e,n=ft.setupOptions;for(e in n)n.hasOwnProperty(e)&&(ft[e]===t?ft[e]=n[e]:ft[e]!==n[e]&&(ft.setupOptions[e]=ft[e]))},u=function(){if(xt)return p("didInit"),!1;if(ft.html5Only)return xt||(st.remove(e,"load",ft.beginDelayedInit),ft.enabled=!0,f()),!0;T();try{gt._externalInterfaceTest(!1),I(!0,ft.flashPollingInterval||(ft.useHighPerformance?10:50)),ft.debugMode||gt._disableDebug(),ft.enabled=!0,h("jstoflash",!0),ft.html5Only||st.add(e,"unload",l)}catch(t){return ft._wD("js/flash exception: "+t.toString()),h("jstoflash",!1),P({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),j(!0),f(),!1}return f(),st.remove(e,"load",ft.beginDelayedInit),!0},N=function(){if(D)return!1;D=!0,c(),R();var e=null,e=null,t=_t.toLowerCase();return-1!==t.indexOf("sm2-usehtml5audio=")&&(e="1"===t.charAt(t.indexOf("sm2-usehtml5audio=")+18),Kt&&console.log((e?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),ft.setup({useHTML5Audio:e})),-1!==t.indexOf("sm2-preferflash=")&&(e="1"===t.charAt(t.indexOf("sm2-preferflash=")+16),Kt&&console.log((e?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),ft.setup({preferFlash:e})),!at&&ft.hasHTML5&&(ft._wD("SoundManager: No Flash detected"+(ft.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),ft.setup({useHTML5Audio:!0,preferFlash:!1})),rt(),!at&&jt&&(Ft.push(x.needFlash),ft.setup({flashLoadTimeout:1})),bt.removeEventListener&&bt.removeEventListener("DOMContentLoaded",N,!1),T(),!0},it=function(){return"complete"===bt.readyState&&(N(),bt.detachEvent("onreadystatechange",it)),!0},E=function(){St=!0,st.remove(e,"load",E)},S=function(){Gt&&((!ft.setupOptions.useHTML5Audio||ft.setupOptions.preferFlash)&&Ft.push(x.mobileUA),ft.setupOptions.useHTML5Audio=!0,ft.setupOptions.preferFlash=!1,Bt||Ut&&!yt.match(/android\s2\.3/i))&&(Ft.push(x.globalHTML5),Bt&&(ft.ignoreFlash=!0),$t=!0)},S(),lt(),st.add(e,"focus",A),st.add(e,"load",w),st.add(e,"load",E),bt.addEventListener?bt.addEventListener("DOMContentLoaded",N,!1):bt.attachEvent?bt.attachEvent("onreadystatechange",it):(h("onload",!1),P({type:"NO_DOM2_EVENTS",fatal:!0}))}var i=null;void 0!==e.SM2_DEFER&&SM2_DEFER||(i=new n),e.SoundManager=n,e.soundManager=i}(window),soundManager.setup({url:"/swf",preferFlash:!1}),Animator.prototype={setOptions:function(e){this.options=Animator.applyDefaults({interval:20,duration:400,onComplete:function(){},onStep:function(){},transition:Animator.tx.easeInOut},e)},seekTo:function(e){this.seekFromTo(this.state,e)},seekFromTo:function(e,t){this.target=Math.max(0,Math.min(1,t)),this.state=Math.max(0,Math.min(1,e)),this.lastTime=(new Date).getTime(),this.intervalId||(this.intervalId=window.setInterval(this.timerDelegate,this.options.interval))},jumpTo:function(e){this.target=this.state=Math.max(0,Math.min(1,e)),this.propagate()},toggle:function(){this.seekTo(1-this.target)},addSubject:function(e,t){return this.subjects[this.subjects.length]=e,this.subjectScopes[this.subjectScopes.length]=t,this},clearSubjects:function(){this.subjects=[],this.subjectScopes=[]},propagate:function(){for(var e=this.options.transition(this.state),t=0;t<this.subjects.length;t++)this.subjects[t].setState?this.subjects[t].setState(e):this.subjects[t].apply(this.subjectScopes[t],[e])},onTimerEvent:function(){var e=(new Date).getTime(),t=e-this.lastTime;this.lastTime=e;var n=t/this.options.duration*(this.state<this.target?1:-1);Math.abs(n)>=Math.abs(this.state-this.target)?this.state=this.target:this.state+=n;try{this.propagate()}finally{this.options.onStep.call(this),this.target==this.state&&(window.clearInterval(this.intervalId),this.intervalId=null,this.options.onComplete.call(this))}},play:function(){this.seekFromTo(0,1)},reverse:function(){this.seekFromTo(1,0)},inspect:function(){for(var e="#<Animator:\n",t=0;t<this.subjects.length;t++)e+=this.subjects[t].inspect();return e+=">"}},Animator.applyDefaults=function(e,t){t=t||{};var n,i={};for(n in e)i[n]=void 0!==t[n]?t[n]:e[n];return i},Animator.makeArray=function(e){if(null==e)return[];if(!e.length)return[e];for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t},Animator.camelize=function(e){var t=e.split("-");if(1==t.length)return t[0];for(var n=0==e.indexOf("-")?t[0].charAt(0).toUpperCase()+t[0].substring(1):t[0],i=1,r=t.length;r>i;i++){var s=t[i];n+=s.charAt(0).toUpperCase()+s.substring(1)}return n},Animator.apply=function(e,t,n){return t instanceof Array?new Animator(n).addSubject(new CSSStyleSubject(e,t[0],t[1])):new Animator(n).addSubject(new CSSStyleSubject(e,t))},Animator.makeEaseIn=function(e){return function(t){return Math.pow(t,2*e)}},Animator.makeEaseOut=function(e){return function(t){return 1-Math.pow(1-t,2*e)}},Animator.makeElastic=function(e){return function(t){return t=Animator.tx.easeInOut(t),(1-Math.cos(t*Math.PI*e))*(1-t)+t}},Animator.makeADSR=function(e,t,n,i){return null==i&&(i=.5),function(r){return e>r?r/e:t>r?1-(r-e)/(t-e)*(1-i):n>r?i:i*(1-(r-n)/(1-n))}},Animator.makeBounce=function(e){var t=Animator.makeElastic(e);return function(e){return e=t(e),1>=e?e:2-e}},Animator.tx={easeInOut:function(e){return-Math.cos(e*Math.PI)/2+.5},linear:function(e){return e},easeIn:Animator.makeEaseIn(1.5),easeOut:Animator.makeEaseOut(1.5),strongEaseIn:Animator.makeEaseIn(2.5),strongEaseOut:Animator.makeEaseOut(2.5),elastic:Animator.makeElastic(1),veryElastic:Animator.makeElastic(3),bouncy:Animator.makeBounce(1),veryBouncy:Animator.makeBounce(3)},NumericalStyleSubject.prototype={setState:function(e){var t=this.getStyle(e);"opacity"==this.property&&0==e?"hidden":"";for(var n=0,i=0;i<this.els.length;i++){try{this.els[i].style[this.property]=t}catch(r){if("fontWeight"!=this.property)throw r}if(n++>20)return}},getStyle:function(e){return e=this.from+(this.to-this.from)*e,"filter"==this.property?"alpha(opacity="+Math.round(100*e)+")":"opacity"==this.property?e:Math.round(e)+this.units},inspect:function(){return"	"+this.property+"("+this.from+this.units+" to "+this.to+this.units+")\n"}},ColorStyleSubject.prototype={expandColor:function(e){var t,n,i,r;return(t=ColorStyleSubject.parseColor(e))?(n=parseInt(t.slice(1,3),16),i=parseInt(t.slice(3,5),16),r=parseInt(t.slice(5,7),16),[n,i,r]):(window.DEBUG&&alert("Invalid colour: '"+e+"'"),void 0)},getValueForState:function(e,t){return Math.round(this.from[e]+(this.to[e]-this.from[e])*t)},setState:function(e){for(var t="#"+ColorStyleSubject.toColorPart(this.getValueForState(0,e))+ColorStyleSubject.toColorPart(this.getValueForState(1,e))+ColorStyleSubject.toColorPart(this.getValueForState(2,e)),n=0;n<this.els.length;n++)this.els[n].style[this.property]=t},inspect:function(){return"	"+this.property+"("+this.origFrom+" to "+this.origTo+")\n"}},ColorStyleSubject.parseColor=function(e){var t,n="#";if(t=ColorStyleSubject.parseColor.rgbRe.exec(e)){for(var i,r=1;3>=r;r++)i=Math.max(0,Math.min(255,parseInt(t[r]))),n+=ColorStyleSubject.toColorPart(i);return n}if(t=ColorStyleSubject.parseColor.hexRe.exec(e)){if(3==t[1].length){for(var r=0;3>r;r++)n+=t[1].charAt(r)+t[1].charAt(r);return n}return"#"+t[1]}return!1},ColorStyleSubject.toColorPart=function(e){e>255&&(e=255);var t=e.toString(16);return 16>e?"0"+t:t},ColorStyleSubject.parseColor.rgbRe=/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i,ColorStyleSubject.parseColor.hexRe=/^\#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,DiscreteStyleSubject.prototype={setState:function(e){for(var t=0;t<this.els.length;t++)this.els[t].style[this.property]=e<=this.threshold?this.from:this.to},inspect:function(){return"	"+this.property+"("+this.from+" to "+this.to+" @ "+this.threshold+")\n"}},CSSStyleSubject.prototype={parseStyle:function(e,t){var n={};if(-1!=e.indexOf(":"))for(var i=e.split(";"),r=0;r<i.length;r++){var s=CSSStyleSubject.ruleRe.exec(i[r]);s&&(n[s[1]]=s[2])}else{var o,a,l;l=t.className,t.className=e;for(var r=0;r<CSSStyleSubject.cssProperties.length;r++)o=CSSStyleSubject.cssProperties[r],a=CSSStyleSubject.getStyle(t,o),null!=a&&(n[o]=a);t.className=l}return n},setState:function(e){for(var t=0;t<this.subjects.length;t++)this.subjects[t].setState(e)},inspect:function(){for(var e="",t=0;t<this.subjects.length;t++)e+=this.subjects[t].inspect();return e}},CSSStyleSubject.getStyle=function(e,t){var n;return document.defaultView&&document.defaultView.getComputedStyle&&(n=document.defaultView.getComputedStyle(e,"").getPropertyValue(t))?n:(t=Animator.camelize(t),e.currentStyle&&(n=e.currentStyle[t]),n||e.style[t])},CSSStyleSubject.ruleRe=/^\s*([a-zA-Z\-]+)\s*:\s*(\S(.+\S)?)\s*$/,CSSStyleSubject.numericalRe=/^-?\d+(?:\.\d+)?(%|[a-zA-Z]{2})?$/,CSSStyleSubject.discreteRe=/^\w+$/,CSSStyleSubject.cssProperties=["azimuth","background","background-attachment","background-color","background-image","background-position","background-repeat","border-collapse","border-color","border-spacing","border-style","border-top","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width","border-width","bottom","clear","clip","color","content","cursor","direction","display","elevation","empty-cells","css-float","font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","height","left","letter-spacing","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-top","margin-right","margin-bottom","margin-left","max-height","max-width","min-height","min-width","orphans","outline","outline-color","outline-style","outline-width","overflow","padding","padding-top","padding-right","padding-bottom","padding-left","pause","position","right","size","table-layout","text-align","text-decoration","text-indent","text-shadow","text-transform","top","vertical-align","visibility","white-space","width","word-spacing","z-index","opacity","outline-offset","overflow-x","overflow-y"],AnimatorChain.prototype={setOptions:function(e){this.options=Animator.applyDefaults({resetOnPlay:!0},e)},play:function(){if(this.forwards=!0,this.current=-1,this.options.resetOnPlay)for(var e=0;e<this.animators.length;e++)this.animators[e].jumpTo(0);this.advance()},reverse:function(){if(this.forwards=!1,this.current=this.animators.length,this.options.resetOnPlay)for(var e=0;e<this.animators.length;e++)this.animators[e].jumpTo(1);this.advance()},toggle:function(){this.forwards?this.seekTo(0):this.seekTo(1)},listenTo:function(e){var t=e.options.onComplete,n=this;e.options.onComplete=function(){t&&t.call(e),n.advance()}},advance:function(){if(this.forwards){if(null==this.animators[this.current+1])return;this.current++,this.animators[this.current].play()}else{if(null==this.animators[this.current-1])return;this.current--,this.animators[this.current].reverse()}},seekTo:function(e){0>=e?(this.forwards=!1,this.animators[this.current].seekTo(0)):(this.forwards=!0,this.animators[this.current].seekTo(1))}},Accordion.prototype={setOptions:function(e){this.options=Object.extend({sections:null,getActivator:function(e){return document.getElementById(e.getAttribute("activator"))},shift:0,initialSection:0,rememberance:!0,animatorOptions:{}},e||{})},show:function(e){for(var t=0;t<this.ans.length;t++)this.ans[t].seekTo(t>e?1:0);this.options.rememberance&&(document.location.hash=this.rememberanceTexts[e])}};var threeSixtyPlayer,ThreeSixtyPlayer;!function(e){function t(){var t=this,n=this,i=soundManager,r=navigator.userAgent,s=r.match(/msie/i),o=r.match(/opera/i),a=r.match(/safari/i),l=r.match(/chrome/i),c=(r.match(/firefox/i),r.match(/ipad|iphone/i)),u="undefined"==typeof e.G_vmlCanvasManager&&"undefined"!=typeof document.createElement("canvas").getContext("2d"),d=o||l?359.9:360;this.excludeClass="threesixty-exclude",this.links=[],this.sounds=[],this.soundsByURL=[],this.indexByURL=[],this.lastSound=null,this.lastTouchedSound=null,this.soundCount=0,this.oUITemplate=null,this.oUIImageMap=null,this.vuMeter=null,this.callbackCount=0,this.peakDataHistory=[],this.config={playNext:!1,autoPlay:!1,allowMultiple:!1,loadRingColor:"#ccc",playRingColor:"#000",backgroundRingColor:"#eee",segmentRingColor:"rgba(255,255,255,0.33)",segmentRingColorAlt:"rgba(0,0,0,0.1)",loadRingColorMetadata:"#ddd",playRingColorMetadata:"rgba(128,192,256,0.9)",circleDiameter:null,circleRadius:null,animDuration:500,animTransition:e.Animator.tx.bouncy,showHMSTime:!1,scaleFont:!0,useWaveformData:!1,waveformDataColor:"#0099ff",waveformDataDownsample:3,waveformDataOutside:!1,waveformDataConstrain:!1,waveformDataLineRatio:.64,useEQData:!1,eqDataColor:"#339933",eqDataDownsample:4,eqDataOutside:!0,eqDataLineRatio:.54,usePeakData:!0,peakDataColor:"#ff33ff",peakDataOutside:!0,peakDataLineRatio:.5,useAmplifier:!0,fontSizeMax:null,scaleArcWidth:1,useFavIcon:!1,playCallback:!1,stopCallback:!1,finishCallback:!1,fallbackFormat:!1,fallbackFromFormat:".mp3",fallbackToFormat:".ogg"},this.css={sDefault:"sm2_link",sBuffering:"sm2_buffering",sPlaying:"sm2_playing",sPaused:"sm2_paused"},this.addEventHandler="undefined"!=typeof e.addEventListener?function(e,t,n){return e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},this.removeEventHandler="undefined"!=typeof e.removeEventListener?function(e,t,n){return e.removeEventListener(t,n,!1)}:function(e,t,n){return e.detachEvent("on"+t,n)},this.hasClass=function(e,t){return"undefined"!=typeof e.className?e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")):!1},this.addClass=function(e,n){return e&&n&&!t.hasClass(e,n)?(e.className=(e.className?e.className+" ":"")+n,void 0):!1},this.removeClass=function(e,n){return e&&n&&t.hasClass(e,n)?(e.className=e.className.replace(new RegExp("( "+n+")|("+n+")","g"),""),void 0):!1},this.getElementsByClassName=function(e,n,i){var r,s,o=i||document,a=[],l=[];if("undefined"!=typeof n&&"string"!=typeof n)for(r=n.length;r--;)l&&l[n[r]]||(l[n[r]]=o.getElementsByTagName(n[r]));else l=n?o.getElementsByTagName(n):o.all||o.getElementsByTagName("*");if("string"!=typeof n)for(r=n.length;r--;)for(s=l[n[r]].length;s--;)t.hasClass(l[n[r]][s],e)&&a.push(l[n[r]][s]);else for(r=0;r<l.length;r++)t.hasClass(l[r],e)&&a.push(l[r]);return a},this.getParentByNodeName=function(e,t){if(!e||!t)return!1;for(t=t.toLowerCase();e.parentNode&&t!==e.parentNode.nodeName.toLowerCase();)e=e.parentNode;return e.parentNode&&t===e.parentNode.nodeName.toLowerCase()?e.parentNode:null},this.getParentByClassName=function(e,n){if(!e||!n)return!1;for(;e.parentNode&&!t.hasClass(e.parentNode,n);)e=e.parentNode;return e.parentNode&&t.hasClass(e.parentNode,n)?e.parentNode:null},this.getSoundByURL=function(e){return"undefined"!=typeof t.soundsByURL[e]?t.soundsByURL[e]:null},this.isChildOfNode=function(e,t){if(!e||!e.parentNode)return!1;t=t.toLowerCase();do e=e.parentNode;while(e&&e.parentNode&&e.nodeName.toLowerCase()!==t);return e&&e.nodeName.toLowerCase()===t?e:null},this.isChildOfClass=function(e,n){if(!e||!n)return!1;for(;e.parentNode&&!t.hasClass(e,n);)e=t.findParent(e);return t.hasClass(e,n)},this.findParent=function(e){if(!e||!e.parentNode)return!1;if(e=e.parentNode,2===e.nodeType)for(;e&&e.parentNode&&2===e.parentNode.nodeType;)e=e.parentNode;return e},this.getStyle=function(t,n){try{if(t.currentStyle)return t.currentStyle[n];if(e.getComputedStyle)return document.defaultView.getComputedStyle(t,null).getPropertyValue(n)
}catch(i){}return null},this.findXY=function(e){var t=0,n=0;do t+=e.offsetLeft,n+=e.offsetTop;while(e=e.offsetParent);return[t,n]},this.getMouseXY=function(n){return n=n?n:e.event,c&&n.touches&&(n=n.touches[0]),n.pageX||n.pageY?[n.pageX,n.pageY]:n.clientX||n.clientY?[n.clientX+t.getScrollLeft(),n.clientY+t.getScrollTop()]:void 0},this.getScrollLeft=function(){return document.body.scrollLeft+document.documentElement.scrollLeft},this.getScrollTop=function(){return document.body.scrollTop+document.documentElement.scrollTop},this.events={play:function(){n.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=n.css.sPlaying,n.addClass(this._360data.oUIBox,this._360data.className),t.fanOut(this),"function"==typeof t.config.playCallback&&t.config.playCallback.call(t,this)},stop:function(){n.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className="",t.fanIn(this),"function"==typeof t.config.stopCallback&&t.config.stopCallback.call(t,this)},pause:function(){n.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=n.css.sPaused,n.addClass(this._360data.oUIBox,this._360data.className)},resume:function(){n.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=n.css.sPlaying,n.addClass(this._360data.oUIBox,this._360data.className)},finish:function(){var e;n.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className="",this._360data.didFinish=!0,t.fanIn(this),n.config.playNext&&(e=n.indexByURL[this._360data.oLink.href]+1,e<n.links.length&&n.handleClick({target:n.links[e]})),"function"==typeof t.config.finishCallback&&t.config.finishCallback.call(t,this)},whileloading:function(){this.paused&&t.updatePlaying.apply(this)},whileplaying:function(){t.updatePlaying.apply(this),this._360data.fps++},bufferchange:function(){this.isBuffering?n.addClass(this._360data.oUIBox,n.css.sBuffering):n.removeClass(this._360data.oUIBox,n.css.sBuffering)}},this.stopEvent=function(t){return"undefined"!=typeof t&&"undefined"!=typeof t.preventDefault?t.preventDefault():"undefined"!=typeof e.event&&"undefined"!=typeof e.event.returnValue&&(e.event.returnValue=!1),!1},this.getTheDamnLink=s?function(t){return t&&t.target?t.target:e.event.srcElement}:function(e){return e.target},this.handleClick=function(n){if(n.button>1)return!0;var r,s,o,a,l,c,u=t.getTheDamnLink(n);return"a"===u.nodeName.toLowerCase()||(u=t.isChildOfNode(u,"a"))?t.isChildOfClass(u,"ui360")?(r=u.getAttribute("href"),u.href&&i.canPlayLink(u)&&!t.hasClass(u,t.excludeClass)?(i._writeDebug("handleClick()"),s=u.href,o=t.getSoundByURL(s),o?o===t.lastSound?o.togglePause():(o.togglePause(),i._writeDebug("sound different than last sound: "+t.lastSound.id),!t.config.allowMultiple&&t.lastSound&&t.stopSound(t.lastSound)):(a=u.parentNode,l=t.getElementsByClassName("ui360-vis","div",a.parentNode).length,o=i.createSound({id:"ui360Sound"+t.soundCount++,url:s,onplay:t.events.play,onstop:t.events.stop,onpause:t.events.pause,onresume:t.events.resume,onfinish:t.events.finish,onbufferchange:t.events.bufferchange,type:u.type||null,whileloading:t.events.whileloading,whileplaying:t.events.whileplaying,useWaveformData:l&&t.config.useWaveformData,useEQData:l&&t.config.useEQData,usePeakData:l&&t.config.usePeakData}),c=parseInt(t.getElementsByClassName("sm2-360ui","div",a)[0].offsetWidth,10),o._360data={oUI360:t.getParentByClassName(u,"ui360"),oLink:u,className:t.css.sPlaying,oUIBox:t.getElementsByClassName("sm2-360ui","div",a)[0],oCanvas:t.getElementsByClassName("sm2-canvas","canvas",a)[0],oButton:t.getElementsByClassName("sm2-360btn","span",a)[0],oTiming:t.getElementsByClassName("sm2-timing","div",a)[0],oCover:t.getElementsByClassName("sm2-cover","div",a)[0],circleDiameter:c,circleRadius:c/2,lastTime:null,didFinish:null,pauseCount:0,radius:0,fontSize:1,fontSizeMax:t.config.fontSizeMax,scaleFont:l&&t.config.scaleFont,showHMSTime:l,amplifier:l&&t.config.usePeakData?.9:1,radiusMax:.175*c,width:0,widthMax:.4*c,lastValues:{bytesLoaded:0,bytesTotal:0,position:0,durationEstimate:0},animating:!1,oAnim:new e.Animator({duration:t.config.animDuration,transition:t.config.animTransition,onComplete:function(){}}),oAnimProgress:function(e){var n=this;n._360data.radius=parseInt(n._360data.radiusMax*n._360data.amplifier*e,10),n._360data.width=parseInt(n._360data.widthMax*n._360data.amplifier*e,10),n._360data.scaleFont&&null!==n._360data.fontSizeMax&&(n._360data.oTiming.style.fontSize=parseInt(Math.max(1,n._360data.fontSizeMax*e),10)+"px",n._360data.oTiming.style.opacity=e),(n.paused||0===n.playState||0===n._360data.lastValues.bytesLoaded||0===n._360data.lastValues.position)&&t.updatePlaying.apply(n)},fps:0},"undefined"!=typeof t.Metadata&&t.getElementsByClassName("metadata","div",o._360data.oUI360).length&&(o._360data.metadata=new t.Metadata(o,t)),o._360data.scaleFont&&null!==o._360data.fontSizeMax&&(o._360data.oTiming.style.fontSize="1px"),o._360data.oAnim.addSubject(o._360data.oAnimProgress,o),t.refreshCoords(o),t.updatePlaying.apply(o),t.soundsByURL[s]=o,t.sounds.push(o),!t.config.allowMultiple&&t.lastSound&&t.stopSound(t.lastSound),o.play()),t.lastSound=o,"undefined"!=typeof n&&"undefined"!=typeof n.preventDefault?n.preventDefault():"undefined"!=typeof e.event&&(e.event.returnValue=!1),!1):!0):!0:!0},this.fanOut=function(n){var i=n;return 1===i._360data.animating?!1:(i._360data.animating=0,soundManager._writeDebug("fanOut: "+i.id+": "+i._360data.oLink.href),i._360data.oAnim.seekTo(1),e.setTimeout(function(){i._360data.animating=0},t.config.animDuration+20),void 0)},this.fanIn=function(n){var i=n;return-1===i._360data.animating?!1:(i._360data.animating=-1,soundManager._writeDebug("fanIn: "+i.id+": "+i._360data.oLink.href),i._360data.oAnim.seekTo(0),e.setTimeout(function(){i._360data.didFinish=!1,i._360data.animating=0,t.resetLastValues(i)},t.config.animDuration+20),void 0)},this.resetLastValues=function(e){e._360data.lastValues.position=0},this.refreshCoords=function(e){e._360data.canvasXY=t.findXY(e._360data.oCanvas),e._360data.canvasMid=[e._360data.circleRadius,e._360data.circleRadius],e._360data.canvasMidXY=[e._360data.canvasXY[0]+e._360data.canvasMid[0],e._360data.canvasXY[1]+e._360data.canvasMid[1]]},this.stopSound=function(e){soundManager._writeDebug("stopSound: "+e.id),soundManager.stop(e.id),c||soundManager.unload(e.id)},this.buttonClick=function(n){var i=n?n.target?n.target:n.srcElement:e.event.srcElement;return t.handleClick({target:t.getParentByClassName(i,"sm2-360ui").nextSibling}),!1},this.buttonMouseDown=function(e){return c?t.addEventHandler(document,"touchmove",t.mouseDown):document.onmousemove=function(e){t.mouseDown(e)},t.stopEvent(e),!1},this.mouseDown=function(n){if(!c&&n.button>1)return!0;if(!t.lastSound)return t.stopEvent(n),!1;var i,r,s,o=n?n:e.event;return c&&o.touches&&(o=o.touches[0]),i=o.target||o.srcElement,r=t.getSoundByURL(t.getElementsByClassName("sm2_link","a",t.getParentByClassName(i,"ui360"))[0].href),t.lastTouchedSound=r,t.refreshCoords(r),s=r._360data,t.addClass(s.oUIBox,"sm2_dragging"),s.pauseCount=t.lastTouchedSound.paused?1:0,t.mmh(n?n:e.event),c?(t.removeEventHandler(document,"touchmove",t.mouseDown),t.addEventHandler(document,"touchmove",t.mmh),t.addEventHandler(document,"touchend",t.mouseUp)):(document.onmousemove=t.mmh,document.onmouseup=t.mouseUp),t.stopEvent(n),!1},this.mouseUp=function(){var e=t.lastTouchedSound._360data;t.removeClass(e.oUIBox,"sm2_dragging"),0===e.pauseCount&&t.lastTouchedSound.resume(),c?(t.removeEventHandler(document,"touchmove",t.mmh),t.removeEventHandler(document,"touchend",t.mouseUP)):(document.onmousemove=null,document.onmouseup=null)},this.mmh=function(n){"undefined"==typeof n&&(n=e.event);var i=t.lastTouchedSound,r=t.getMouseXY(n),s=r[0],o=r[1],a=s-i._360data.canvasMidXY[0],l=o-i._360data.canvasMidXY[1],c=Math.floor(d-(t.rad2deg(Math.atan2(a,l))+180));return i.setPosition(i.durationEstimate*(c/d)),t.stopEvent(n),!1},this.drawSolidArc=function(e,n,i,r,s,l,c){var u,d,h,p,f=e;f.getContext&&(u=f.getContext("2d")),e=u,c||t.clearCanvas(f),n&&(u.fillStyle=n),e.beginPath(),isNaN(s)&&(s=0),d=i-r,h=o||a,(!h||h&&i>0)&&(e.arc(0,0,i,l,s,!1),p=t.getArcEndpointCoords(d,s),e.lineTo(p.x,p.y),e.arc(0,0,d,s,l,!0),e.closePath(),e.fill())},this.getArcEndpointCoords=function(e,t){return{x:e*Math.cos(t),y:e*Math.sin(t)}},this.deg2rad=function(e){return e*Math.PI/180},this.rad2deg=function(e){return 180*e/Math.PI},this.getTime=function(e,t){var n=Math.floor(e/1e3),i=Math.floor(n/60),r=n-60*i;return t?i+":"+(10>r?"0"+r:r):{min:i,sec:r}},this.clearCanvas=function(e){var t,n,i=e,r=null;i.getContext&&(r=i.getContext("2d")),t=i.offsetWidth,n=i.offsetHeight,r.clearRect(-(t/2),-(n/2),t,n)},this.updatePlaying=function(){var e=t.config.showHMSTime||this._360data.showHMSTime?t.getTime(this.position,!0):parseInt(this.position/1e3,10),n=t.config.scaleArcWidth;this.bytesLoaded&&(this._360data.lastValues.bytesLoaded=this.bytesLoaded,this._360data.lastValues.bytesTotal=this.bytesTotal),this.position&&(this._360data.lastValues.position=this.position),this.durationEstimate&&(this._360data.lastValues.durationEstimate=this.durationEstimate),t.drawSolidArc(this._360data.oCanvas,t.config.backgroundRingColor,this._360data.width,this._360data.radius*n,t.deg2rad(d),!1),t.drawSolidArc(this._360data.oCanvas,this._360data.metadata?t.config.loadRingColorMetadata:t.config.loadRingColor,this._360data.width,this._360data.radius*n,t.deg2rad(d*(this._360data.lastValues.bytesLoaded/this._360data.lastValues.bytesTotal)),0,!0),0!==this._360data.lastValues.position&&t.drawSolidArc(this._360data.oCanvas,this._360data.metadata?t.config.playRingColorMetadata:t.config.playRingColor,this._360data.width,this._360data.radius*n,t.deg2rad(1===this._360data.didFinish?d:d*(this._360data.lastValues.position/this._360data.lastValues.durationEstimate)),0,!0),this._360data.metadata&&this._360data.metadata.events.whileplaying(),e!==this._360data.lastTime&&(this._360data.lastTime=e,this._360data.oTiming.innerHTML=e),(this.instanceOptions.useWaveformData||this.instanceOptions.useEQData)&&u&&t.updateWaveform(this),t.config.useFavIcon&&t.vuMeter&&t.vuMeter.updateVU(this)},this.updateWaveform=function(e){if(!t.config.useWaveformData&&!t.config.useEQData||!i.features.waveformData&&!i.features.eqData)return!1;if(!e.waveformData.left.length&&!e.eqData.length&&!e.peakData.left)return!1;var n,r,s,o,a,l,c,u,d,h,p,f,m,g,v,y,_=(e._360data.oCanvas.getContext("2d"),parseInt(e._360data.circleDiameter/2,10)),b=_/2;if(t.config.useWaveformData)for(o=t.config.waveformDataDownsample,o=Math.max(1,o),a=256,l=a/o,c=0,u=0,d=null,h=t.config.waveformDataOutside?1:t.config.waveformDataConstrain?.5:.565,b=t.config.waveformDataOutside?.7:.75,p=t.deg2rad(360/l*t.config.waveformDataLineRatio),n=0;a>n;n+=o)c=t.deg2rad(360*(1*(n/l)/o)),u=c+p,d=e.waveformData.left[n],0>d&&t.config.waveformDataConstrain&&(d=Math.abs(d)),t.drawSolidArc(e._360data.oCanvas,t.config.waveformDataColor,e._360data.width*h*(2-t.config.scaleArcWidth),1.25*e._360data.radius*b*d,u,c,!0);if(t.config.useEQData)for(o=t.config.eqDataDownsample,f=0,o=Math.max(1,o),m=192,l=m/o,h=t.config.eqDataOutside?1:.565,s=t.config.eqDataOutside?-1:1,b=t.config.eqDataOutside?.5:.75,c=0,u=0,p=t.deg2rad(360/l*t.config.eqDataLineRatio),g=t.deg2rad(1===e._360data.didFinish?360:360*(e._360data.lastValues.position/e._360data.lastValues.durationEstimate)),r=0,v=0,n=0;m>n;n+=o)c=t.deg2rad(360*(n/m)),u=c+p,t.drawSolidArc(e._360data.oCanvas,u>g?t.config.eqDataColor:t.config.playRingColor,e._360data.width*h,e._360data.radius*b*e.eqData.left[n]*s,u,c,!0);if(t.config.usePeakData&&!e._360data.animating){for(y=e.peakData.left||e.peakData.right,m=3,n=0;m>n;n++)y=y||e.eqData[n];e._360data.amplifier=t.config.useAmplifier?.9+.1*y:1,e._360data.radiusMax=.175*e._360data.circleDiameter*e._360data.amplifier,e._360data.widthMax=.4*e._360data.circleDiameter*e._360data.amplifier,e._360data.radius=parseInt(e._360data.radiusMax*e._360data.amplifier,10),e._360data.width=parseInt(e._360data.widthMax*e._360data.amplifier,10)}},this.getUIHTML=function(e){return['<canvas class="sm2-canvas" width="'+e+'" height="'+e+'"></canvas>',' <span class="sm2-360btn sm2-360btn-default"></span>',' <div class="sm2-timing'+(navigator.userAgent.match(/safari/i)?" alignTweak":"")+'"></div>',' <div class="sm2-cover"></div>']},this.uiTest=function(e){var n,i,r,s,o,a,l,c,u,d=document.createElement("div");return d.className="sm2-360ui",n=document.createElement("div"),n.className="ui360"+(e?" "+e:""),i=n.appendChild(d.cloneNode(!0)),n.style.position="absolute",n.style.left="-9999px",r=document.body.appendChild(n),s=i.offsetWidth,o=t.getUIHTML(s),i.innerHTML=o[1]+o[2]+o[3],a=parseInt(i.offsetWidth,10),l=parseInt(a/2,10),u=t.getElementsByClassName("sm2-timing","div",r)[0],c=parseInt(t.getStyle(u,"font-size"),10),isNaN(c)&&(c=null),n.parentNode.removeChild(n),o=n=i=r=null,{circleDiameter:a,circleRadius:l,fontSizeMax:c}},this.init=function(){i._writeDebug("threeSixtyPlayer.init()");var n,r,o,a,l,u,d,h,p,f,m,g,v,y,_=t.getElementsByClassName("ui360","div"),b=[],w=!1,k=0;for(n=0,r=_.length;r>n;n++){var C=_[n].getElementsByTagName("a")[0];if(t.config.fallbackFormat&&t.config.fallbackFromFormat&&t.config.fallbackToFormat){var A=new RegExp("\\"+t.config.fallbackFromFormat+"\\s*$","i");C.href=C.href.replace(A,t.config.fallbackToFormat)}b.push(C),_[n].style.backgroundImage="none"}for(t.oUITemplate=document.createElement("div"),t.oUITemplate.className="sm2-360ui",t.oUITemplateVis=document.createElement("div"),t.oUITemplateVis.className="sm2-360ui",h=t.uiTest(),t.config.circleDiameter=h.circleDiameter,t.config.circleRadius=h.circleRadius,p=t.uiTest("ui360-vis"),t.config.fontSizeMax=p.fontSizeMax,t.oUITemplate.innerHTML=t.getUIHTML(t.config.circleDiameter).join(""),t.oUITemplateVis.innerHTML=t.getUIHTML(p.circleDiameter).join(""),n=0,r=b.length;r>n;n++)!i.canPlayLink(b[n])||t.hasClass(b[n],t.excludeClass)||t.hasClass(b[n],t.css.sDefault)||(t.addClass(b[n],t.css.sDefault),t.links[k]=b[n],t.indexByURL[b[n].href]=k,k++,w=t.hasClass(b[n].parentNode,"ui360-vis"),u=(w?p:h).circleDiameter,d=(w?p:h).circleRadius,f=b[n].parentNode.insertBefore((w?t.oUITemplateVis:t.oUITemplate).cloneNode(!0),b[n]),s&&"undefined"!=typeof e.G_vmlCanvasManager?(g=b[n].parentNode,v=document.createElement("canvas"),v.className="sm2-canvas",y="sm2_canvas_"+parseInt(1048576*Math.random(),10),v.id=y,v.width=u,v.height=u,f.appendChild(v),e.G_vmlCanvasManager.initElement(v),o=document.getElementById(y)):o=b[n].parentNode.getElementsByTagName("canvas")[0],l=t.getElementsByClassName("sm2-cover","div",b[n].parentNode)[0],m=b[n].parentNode.getElementsByTagName("span")[0],t.addEventHandler(m,"click",t.buttonClick),c?t.addEventHandler(l,"touchstart",t.mouseDown):t.addEventHandler(l,"mousedown",t.mouseDown),a=o.getContext("2d"),a.translate(d,d),a.rotate(t.deg2rad(-90)));k>0&&(t.addEventHandler(document,"click",t.handleClick),t.config.autoPlay&&t.handleClick({target:t.links[0],preventDefault:function(){}})),i._writeDebug("threeSixtyPlayer.init(): Found "+k+" relevant items."),t.config.useFavIcon&&"undefined"!=typeof this.VUMeter&&(this.vuMeter=new this.VUMeter(this))}}t.prototype.VUMeter=function(e){var t=e,n=this,i=document.getElementsByTagName("head")[0],r=navigator.userAgent.match(/opera/i),s=navigator.userAgent.match(/firefox/i);this.vuMeterData=[],this.vuDataCanvas=null,this.setPageIcon=function(e){if(!t.config.useFavIcon||!t.config.usePeakData||!e)return!1;var n=document.getElementById("sm2-favicon");n&&(i.removeChild(n),n=null),n||(n=document.createElement("link"),n.id="sm2-favicon",n.rel="shortcut icon",n.type="image/png",n.href=e,document.getElementsByTagName("head")[0].appendChild(n))},this.resetPageIcon=function(){if(!t.config.useFavIcon)return!1;var e=document.getElementById("favicon");e&&(e.href="/favicon.ico")},this.updateVU=function(e){soundManager.flashVersion>=9&&t.config.useFavIcon&&t.config.usePeakData&&n.setPageIcon(n.vuMeterData[parseInt(16*e.peakData.left,10)][parseInt(16*e.peakData.right,10)])},this.createVUData=function(){var e=0,t=0,i=n.vuDataCanvas.getContext("2d"),r=i.createLinearGradient(0,16,0,0),s=i.createLinearGradient(0,16,0,0),o="rgba(0,0,0,0.2)";for(r.addColorStop(0,"rgb(0,192,0)"),r.addColorStop(.3,"rgb(0,255,0)"),r.addColorStop(.625,"rgb(255,255,0)"),r.addColorStop(.85,"rgb(255,0,0)"),s.addColorStop(0,o),s.addColorStop(1,"rgba(0,0,0,0.5)"),e=0;16>e;e++)n.vuMeterData[e]=[];for(e=0;16>e;e++)for(t=0;16>t;t++)n.vuDataCanvas.setAttribute("width",16),n.vuDataCanvas.setAttribute("height",16),i.fillStyle=s,i.fillRect(0,0,7,15),i.fillRect(8,0,7,15),i.fillStyle=r,i.fillRect(0,15-e,7,16-(16-e)),i.fillRect(8,15-t,7,16-(16-t)),i.clearRect(0,3,16,1),i.clearRect(0,7,16,1),i.clearRect(0,11,16,1),n.vuMeterData[e][t]=n.vuDataCanvas.toDataURL("image/png")},this.testCanvas=function(){var e,t=document.createElement("canvas"),n=null;if(!t||"undefined"==typeof t.getContext)return null;if(n=t.getContext("2d"),!n||"function"!=typeof t.toDataURL)return null;try{e=t.toDataURL("image/png")}catch(i){return null}return t},this.init=function(){t.config.useFavIcon&&(n.vuDataCanvas=n.testCanvas(),n.vuDataCanvas&&(s||r)?n.createVUData():t.config.useFavIcon=!1)},this.init()},t.prototype.Metadata=function(e,t){soundManager._wD("Metadata()");var n,i,r=this,s=e._360data.oUI360,o=s.getElementsByTagName("ul")[0],a=o.getElementsByTagName("li");for(navigator.userAgent.match(/firefox/i),this.lastWPExec=0,this.refreshInterval=250,this.totalTime=0,this.events={whileplaying:function(){var n,i,s,o=e._360data.width,a=e._360data.radius,l=e.durationEstimate||1e3*r.totalTime,c=null;for(n=0,i=r.data.length;i>n;n++)c=0===n%2,t.drawSolidArc(e._360data.oCanvas,c?t.config.segmentRingColorAlt:t.config.segmentRingColor,c?o:o,c?a/2:a/2,t.deg2rad(360*(r.data[n].endTimeMS/l)),t.deg2rad(360*((r.data[n].startTimeMS||1)/l)),!0);s=new Date,s-r.lastWPExec>r.refreshInterval&&(r.refresh(),r.lastWPExec=s)}},this.refresh=function(){var t,n,i=null,r=e.position,s=e._360data.metadata.data;for(t=0,n=s.length;n>t;t++)if(r>=s[t].startTimeMS&&r<=s[t].endTimeMS){i=t;break}i!==s.currentItem&&i<s.length&&(e._360data.oLink.innerHTML=s.mainTitle+' <span class="metadata"><span class="sm2_divider"> | </span><span class="sm2_metadata">'+s[i].title+"</span></span>",s.currentItem=i)},this.strToTime=function(e){var t,n=e.split(":"),i=0;for(t=n.length;t--;)i+=parseInt(n[t],10)*Math.pow(60,n.length-1-t);return i},this.data=[],this.data.givenDuration=null,this.data.currentItem=null,this.data.mainTitle=e._360data.oLink.innerHTML,n=0;n<a.length;n++)this.data[n]={o:null,title:a[n].getElementsByTagName("p")[0].innerHTML,startTime:a[n].getElementsByTagName("span")[0].innerHTML,startSeconds:r.strToTime(a[n].getElementsByTagName("span")[0].innerHTML.replace(/[()]/g,"")),duration:0,durationMS:null,startTimeMS:null,endTimeMS:null,oNote:null};for(i=t.getElementsByClassName("duration","div",s),this.data.givenDuration=i.length?1e3*r.strToTime(i[0].innerHTML):0,n=0;n<this.data.length;n++)this.data[n].duration=parseInt(this.data[n+1]?this.data[n+1].startSeconds:(r.data.givenDuration?r.data.givenDuration:e.durationEstimate)/1e3,10)-this.data[n].startSeconds,this.data[n].startTimeMS=1e3*this.data[n].startSeconds,this.data[n].durationMS=1e3*this.data[n].duration,this.data[n].endTimeMS=this.data[n].startTimeMS+this.data[n].durationMS,this.totalTime+=this.data[n].duration},navigator.userAgent.match(/webkit/i)&&navigator.userAgent.match(/mobile/i)&&soundManager.setup({useHTML5Audio:!0}),soundManager.setup({html5PollingInterval:50,debugMode:e.location.href.match(/debug=1/i),consoleOnly:!0,flashVersion:9,useHighPerformance:!0,useFlashBlock:!0}),soundManager.debugMode&&e.setInterval(function(){var t=e.threeSixtyPlayer;t&&t.lastSound&&t.lastSound._360data.fps&&"undefined"==typeof e.isHome&&(soundManager._writeDebug("fps: ~"+t.lastSound._360data.fps),t.lastSound._360data.fps=0)},1e3),e.ThreeSixtyPlayer=t}(window),threeSixtyPlayer=new ThreeSixtyPlayer,soundManager.onready(threeSixtyPlayer.init),function(e){custom_options={loadRingColor:"#e9e9e9",playRingColor:"#444",backgroundRingColor:"#e9e9e9",animDuration:500,scaleArcWidth:.7,showHMSTime:!0,animTransition:Animator.tx.bouncy,playCallback:function(e){jQuery(".ui360.playing").removeClass("playing").find("a").show(),jQuery(e._360data.oUIBox).parent().addClass("playing").find("a").hide();var t=jQuery(e._360data.oUIBox).parents(".attached_file, .recorded-message").eq(0);0!==t.length&&t.addClass("playing")},finishCallback:function(e){jQuery(e._360data.oUIBox).parent().removeClass("playing").find("a").show();var t=jQuery(e._360data.oUIBox).parents(".attached_file, .recorded-message").eq(0);0!==t.length&&t.removeClass("playing")},stopCallback:function(e){jQuery(e._360data.oUIBox).parent().removeClass("playing").find("a").show();var t=jQuery(e._360data.oUIBox).parents(".attached_file, .recorded-message").eq(0);0!==t.length&&t.removeClass("playing")},fallbackFormat:jQuery.browser.mozilla||jQuery.browser.opera},threeSixtyPlayer&&threeSixtyPlayer.config&&e.extend(threeSixtyPlayer.config,custom_options)}(jQuery),/**
 * @version: 1.0 Alpha-1
 * @author: Coolite Inc. http://www.coolite.com/
 * @date: 2008-05-13
 * @copyright: Copyright (c) 2006-2008, Coolite Inc. (http://www.coolite.com/). All rights reserved.
 * @license: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/. 
 * @website: http://www.datejs.com/
 */
Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var e=Date,t=e.prototype,n=e.CultureInfo,i=function(e,t){return t||(t=2),("000"+e).slice(-1*t)};t.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},t.setTimeToNow=function(){var e=new Date;return this.setHours(e.getHours()),this.setMinutes(e.getMinutes()),this.setSeconds(e.getSeconds()),this.setMilliseconds(e.getMilliseconds()),this},e.today=function(){return(new Date).clearTime()},e.compare=function(e,t){if(isNaN(e)||isNaN(t))throw new Error(e+" - "+t);if(e instanceof Date&&t instanceof Date)return t>e?-1:e>t?1:0;throw new TypeError(e+" - "+t)},e.equals=function(e,t){return 0===e.compareTo(t)},e.getDayNumberFromName=function(e){for(var t=n.dayNames,i=n.abbreviatedDayNames,r=n.shortestDayNames,s=e.toLowerCase(),o=0;o<t.length;o++)if(t[o].toLowerCase()==s||i[o].toLowerCase()==s||r[o].toLowerCase()==s)return o;return-1},e.getMonthNumberFromName=function(e){for(var t=n.monthNames,i=n.abbreviatedMonthNames,r=e.toLowerCase(),s=0;s<t.length;s++)if(t[s].toLowerCase()==r||i[s].toLowerCase()==r)return s;return-1},e.isLeapYear=function(e){return 0===e%4&&0!==e%100||0===e%400},e.getDaysInMonth=function(t,n){return[31,e.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][n]},e.getTimezoneAbbreviation=function(e){for(var t=n.timezones,i=0;i<t.length;i++)if(t[i].offset===e)return t[i].name;return null},e.getTimezoneOffset=function(e){for(var t=n.timezones,i=0;i<t.length;i++)if(t[i].name===e.toUpperCase())return t[i].offset;return null},t.clone=function(){return new Date(this.getTime())},t.compareTo=function(e){return Date.compare(this,e)},t.equals=function(e){return Date.equals(this,e||new Date)},t.between=function(e,t){return this.getTime()>=e.getTime()&&this.getTime()<=t.getTime()},t.isAfter=function(e){return 1===this.compareTo(e||new Date)},t.isBefore=function(e){return-1===this.compareTo(e||new Date)},t.isToday=function(){return this.isSameDay(new Date)},t.isSameDay=function(e){return this.clone().clearTime().equals(e.clone().clearTime())},t.addMilliseconds=function(e){return this.setMilliseconds(this.getMilliseconds()+e),this},t.addSeconds=function(e){return this.addMilliseconds(1e3*e)},t.addMinutes=function(e){return this.addMilliseconds(6e4*e)},t.addHours=function(e){return this.addMilliseconds(36e5*e)},t.addDays=function(e){return this.setDate(this.getDate()+e),this},t.addWeeks=function(e){return this.addDays(7*e)},t.addMonths=function(t){var n=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+t),this.setDate(Math.min(n,e.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},t.addYears=function(e){return this.addMonths(12*e)},t.add=function(e){if("number"==typeof e)return this._orient=e,this;var t=e;return t.milliseconds&&this.addMilliseconds(t.milliseconds),t.seconds&&this.addSeconds(t.seconds),t.minutes&&this.addMinutes(t.minutes),t.hours&&this.addHours(t.hours),t.weeks&&this.addWeeks(t.weeks),t.months&&this.addMonths(t.months),t.years&&this.addYears(t.years),t.days&&this.addDays(t.days),this};var r,s,o;t.getWeek=function(){var e,t,n,i,a,l,c,u,d,h;return r=r?r:this.getFullYear(),s=s?s:this.getMonth()+1,o=o?o:this.getDate(),2>=s?(e=r-1,t=(0|e/4)-(0|e/100)+(0|e/400),n=(0|(e-1)/4)-(0|(e-1)/100)+(0|(e-1)/400),d=t-n,a=0,l=o-1+31*(s-1)):(e=r,t=(0|e/4)-(0|e/100)+(0|e/400),n=(0|(e-1)/4)-(0|(e-1)/100)+(0|(e-1)/400),d=t-n,a=d+1,l=o+(153*(s-3)+2)/5+58+d),c=(e+t)%7,i=(l+c-a)%7,u=0|l+3-i,h=0>u?53-(0|(c-d)/5):u>364+d?1:(0|u/7)+1,r=s=o=null,h},t.getISOWeek=function(){return r=this.getUTCFullYear(),s=this.getUTCMonth()+1,o=this.getUTCDate(),i(this.getWeek())},t.setWeek=function(e){return this.moveToDayOfWeek(1).addWeeks(e-this.getWeek())},e._validate=function(e,t,n,i){if("undefined"==typeof e)return!1;if("number"!=typeof e)throw new TypeError(e+" is not a Number.");if(t>e||e>n)throw new RangeError(e+" is not a valid value for "+i+".");return!0},e.validateMillisecond=function(t){return e._validate(t,0,999,"millisecond")},e.validateSecond=function(t){return e._validate(t,0,59,"second")},e.validateMinute=function(t){return e._validate(t,0,59,"minute")},e.validateHour=function(t){return e._validate(t,0,23,"hour")},e.validateDay=function(t,n,i){return e._validate(t,1,e.getDaysInMonth(n,i),"day")},e.validateMonth=function(t){return e._validate(t,0,11,"month")},e.validateYear=function(t){return e._validate(t,0,9999,"year")},t.set=function(t){return e.validateMillisecond(t.millisecond)&&this.addMilliseconds(t.millisecond-this.getMilliseconds()),e.validateSecond(t.second)&&this.addSeconds(t.second-this.getSeconds()),e.validateMinute(t.minute)&&this.addMinutes(t.minute-this.getMinutes()),e.validateHour(t.hour)&&this.addHours(t.hour-this.getHours()),e.validateMonth(t.month)&&this.addMonths(t.month-this.getMonth()),e.validateYear(t.year)&&this.addYears(t.year-this.getFullYear()),e.validateDay(t.day,this.getFullYear(),this.getMonth())&&this.addDays(t.day-this.getDate()),t.timezone&&this.setTimezone(t.timezone),t.timezoneOffset&&this.setTimezoneOffset(t.timezoneOffset),t.week&&e._validate(t.week,0,53,"week")&&this.setWeek(t.week),this},t.moveToFirstDayOfMonth=function(){return this.set({day:1})},t.moveToLastDayOfMonth=function(){return this.set({day:e.getDaysInMonth(this.getFullYear(),this.getMonth())})},t.moveToNthOccurrence=function(e,t){var n=0;if(t>0)n=t-1;else if(-1===t)return this.moveToLastDayOfMonth(),this.getDay()!==e&&this.moveToDayOfWeek(e,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(e,1).addWeeks(n)},t.moveToDayOfWeek=function(e,t){var n=(e-this.getDay()+7*(t||1))%7;return this.addDays(0===n?n+=7*(t||1):n)},t.moveToMonth=function(e,t){var n=(e-this.getMonth()+12*(t||1))%12;return this.addMonths(0===n?n+=12*(t||1):n)},t.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},t.getTimezone=function(){return e.getTimezoneAbbreviation(this.getUTCOffset())},t.setTimezoneOffset=function(e){var t=this.getTimezoneOffset(),n=-6*Number(e)/10;return this.addMinutes(n-t)},t.setTimezone=function(t){return this.setTimezoneOffset(e.getTimezoneOffset(t))},t.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},t.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},t.getUTCOffset=function(){var e,t=-10*this.getTimezoneOffset()/6;return 0>t?(e=(t-1e4).toString(),e.charAt(0)+e.substr(2)):(e=(t+1e4).toString(),"+"+e.substr(1))},t.getElapsed=function(e){return(e||new Date)-this},t.toISOString||(t.toISOString=function(){function e(e){return 10>e?"0"+e:e}return'"'+this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+'Z"'}),void 0==t._toString&&(t._toString=t.toString),t.toString=function(e){var t=this;if(e&&1==e.length){var r=n.formatPatterns;switch(t.t=t.toString,e){case"d":return t.t(r.shortDate);case"D":return t.t(r.longDate);case"F":return t.t(r.fullDateTime);case"m":return t.t(r.monthDay);case"r":return t.t(r.rfc1123);case"s":return t.t(r.sortableDateTime);case"t":return t.t(r.shortTime);case"T":return t.t(r.longTime);case"u":return t.t(r.universalSortableDateTime);case"y":return t.t(r.yearMonth)}}var s=function(e){switch(1*e){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return e?e.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(e){if("\\"===e.charAt(0))return e.replace("\\","");switch(t.h=t.getHours,e){case"hh":return i(t.h()<13?0===t.h()?12:t.h():t.h()-12);case"h":return t.h()<13?0===t.h()?12:t.h():t.h()-12;case"HH":return i(t.h());case"H":return t.h();case"mm":return i(t.getMinutes());case"m":return t.getMinutes();case"ss":return i(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return i(t.getFullYear(),4);case"yy":return i(t.getFullYear());case"dddd":return n.dayNames[t.getDay()];case"ddd":return n.abbreviatedDayNames[t.getDay()];case"dd":return i(t.getDate());case"d":return t.getDate();case"MMMM":return n.monthNames[t.getMonth()];case"MMM":return n.abbreviatedMonthNames[t.getMonth()];case"MM":return i(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return t.h()<12?n.amDesignator.substring(0,1):n.pmDesignator.substring(0,1);case"tt":return t.h()<12?n.amDesignator:n.pmDesignator;case"S":return s(t.getDate());default:return e}}):this._toString()}}(),function(){var e=Date,t=e.prototype,n=e.CultureInfo,i=Number.prototype;t._orient=1,t._nth=null,t._is=!1,t._same=!1,t._isSecond=!1,i._dateElement="day",t.next=function(){return this._orient=1,this},e.next=function(){return e.today().next()},t.last=t.prev=t.previous=function(){return this._orient=-1,this},e.last=e.prev=e.previous=function(){return e.today().last()},t.is=function(){return this._is=!0,this},t.same=function(){return this._same=!0,this._isSecond=!1,this},t.today=function(){return this.same().day()},t.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},t.at=function(t){return"string"==typeof t?e.parse(this.toString("d")+" "+t):this.set(t)},i.fromNow=i.after=function(e){var t={};return t[this._dateElement]=this,(e?e.clone():new Date).add(t)},i.ago=i.before=function(e){var t={};return t[this._dateElement]=-1*this,(e?e.clone():new Date).add(t)};var r,s="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),o="january february march april may june july august september october november december".split(/\s/),a="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),l="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),c="final first second third fourth fifth".split(/\s/);t.toObject=function(){for(var e={},t=0;t<a.length;t++)e[a[t].toLowerCase()]=this["get"+l[t]]();return e},e.fromObject=function(e){return e.week=null,Date.today().set(e)};for(var u=function(t){return function(){if(this._is)return this._is=!1,this.getDay()==t;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var n=this._nth;this._nth=null;var i=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(t,n),this>i)throw new RangeError(e.getDayName(t)+" does not occur "+n+" times in the month of "+e.getMonthName(i.getMonth())+" "+i.getFullYear()+".");return this}return this.moveToDayOfWeek(t,this._orient)}},d=function(t){return function(){var i=e.today(),r=t-i.getDay();return 0===t&&1===n.firstDayOfWeek&&0!==i.getDay()&&(r+=7),i.addDays(r)}},h=0;h<s.length;h++)e[s[h].toUpperCase()]=e[s[h].toUpperCase().substring(0,3)]=h,e[s[h]]=e[s[h].substring(0,3)]=d(h),t[s[h]]=t[s[h].substring(0,3)]=u(h);for(var p=function(e){return function(){return this._is?(this._is=!1,this.getMonth()===e):this.moveToMonth(e,this._orient)}},f=function(t){return function(){return e.today().set({month:t,day:1})}},m=0;m<o.length;m++)e[o[m].toUpperCase()]=e[o[m].toUpperCase().substring(0,3)]=m,e[o[m]]=e[o[m].substring(0,3)]=f(m),t[o[m]]=t[o[m].substring(0,3)]=p(m);for(var g=function(e){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var t=this.toObject(),n=(arguments[0]||new Date).toObject(),i="",r=e.toLowerCase(),s=a.length-1;s>-1;s--){if(i=a[s].toLowerCase(),t[i]!=n[i])return!1;if(r==i)break}return!0}return"s"!=e.substring(e.length-1)&&(e+="s"),this["add"+e](this._orient)}},v=function(e){return function(){return this._dateElement=e,this}},y=0;y<a.length;y++)r=a[y].toLowerCase(),t[r]=t[r+"s"]=g(a[y]),i[r]=i[r+"s"]=v(r);t._ss=g("Second");for(var _=function(e){return function(t){return this._same?this._ss(arguments[0]):t||0===t?this.moveToNthOccurrence(t,e):(this._nth=e,2!==e||void 0!==t&&null!==t?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},b=0;b<c.length;b++)t[c[b]]=0===b?_(-1):_(b)}(),function(){Date.Parsing={Exception:function(e){this.message="Parse error at '"+e.substring(0,10)+" ...'"}};for(var e=Date.Parsing,t=e.Operators={rtoken:function(t){return function(n){var i=n.match(t);if(i)return[i[0],n.substring(i[0].length)];throw new e.Exception(n)}},token:function(){return function(e){return t.rtoken(new RegExp("^s*"+e+"s*"))(e)}},stoken:function(e){return t.rtoken(new RegExp("^"+e))},until:function(e){return function(t){for(var n=[],i=null;t.length;){try{i=e.call(this,t)}catch(r){n.push(i[0]),t=i[1];continue}break}return[n,t]}},many:function(e){return function(t){for(var n=[],i=null;t.length;){try{i=e.call(this,t)}catch(r){return[n,t]}n.push(i[0]),t=i[1]}return[n,t]}},optional:function(e){return function(t){var n=null;try{n=e.call(this,t)}catch(i){return[null,t]}return[n[0],n[1]]}},not:function(t){return function(n){try{t.call(this,n)}catch(i){return[null,n]}throw new e.Exception(n)}},ignore:function(e){return e?function(t){var n=null;return n=e.call(this,t),[null,n[1]]}:null},product:function(){for(var e=arguments[0],n=Array.prototype.slice.call(arguments,1),i=[],r=0;r<e.length;r++)i.push(t.each(e[r],n));return i},cache:function(t){var n={},i=null;return function(r){try{i=n[r]=n[r]||t.call(this,r)}catch(s){i=n[r]=s}if(i instanceof e.Exception)throw i;return i}},any:function(){var t=arguments;return function(n){for(var i=null,r=0;r<t.length;r++)if(null!=t[r]){try{i=t[r].call(this,n)}catch(s){i=null}if(i)return i}throw new e.Exception(n)}},each:function(){var t=arguments;return function(n){for(var i=[],r=null,s=0;s<t.length;s++)if(null!=t[s]){try{r=t[s].call(this,n)}catch(o){throw new e.Exception(n)}i.push(r[0]),n=r[1]}return[i,n]}},all:function(){var e=arguments,t=t;return t.each(t.optional(e))},sequence:function(n,i,r){return i=i||t.rtoken(/^\s*/),r=r||null,1==n.length?n[0]:function(t){for(var s=null,o=null,a=[],l=0;l<n.length;l++){try{s=n[l].call(this,t)}catch(c){break}a.push(s[0]);try{o=i.call(this,s[1])}catch(u){o=null;break}t=o[1]}if(!s)throw new e.Exception(t);if(o)throw new e.Exception(o[1]);if(r)try{s=r.call(this,s[1])}catch(d){throw new e.Exception(s[1])}return[a,s?s[1]:t]}},between:function(e,n,i){i=i||e;var s=t.each(t.ignore(e),n,t.ignore(i));return function(e){var t=s.call(this,e);return[[t[0][0],r[0][2]],t[1]]}},list:function(e,n,i){return n=n||t.rtoken(/^\s*/),i=i||null,e instanceof Array?t.each(t.product(e.slice(0,-1),t.ignore(n)),e.slice(-1),t.ignore(i)):t.each(t.many(t.each(e,t.ignore(n))),px,t.ignore(i))},set:function(n,i,r){return i=i||t.rtoken(/^\s*/),r=r||null,function(s){for(var o=null,a=null,l=null,c=null,u=[[],s],d=!1,h=0;h<n.length;h++){l=null,a=null,o=null,d=1==n.length;try{o=n[h].call(this,s)}catch(p){continue}if(c=[[o[0]],o[1]],o[1].length>0&&!d)try{l=i.call(this,o[1])}catch(f){d=!0}else d=!0;if(d||0!==l[1].length||(d=!0),!d){for(var m=[],g=0;g<n.length;g++)h!=g&&m.push(n[g]);a=t.set(m,i).call(this,l[1]),a[0].length>0&&(c[0]=c[0].concat(a[0]),c[1]=a[1])}if(c[1].length<u[1].length&&(u=c),0===u[1].length)break}if(0===u[0].length)return u;if(r){try{l=r.call(this,u[1])}catch(v){throw new e.Exception(u[1])}u[1]=l[1]}return u}},forward:function(e,t){return function(n){return e[t].call(this,n)}},replace:function(e,t){return function(n){var i=e.call(this,n);return[t,i[1]]}},process:function(e,t){return function(n){var i=e.call(this,n);return[t.call(this,i[0]),i[1]]}},min:function(t,n){return function(i){var r=n.call(this,i);if(r[0].length<t)throw new e.Exception(i);return r}}},n=function(e){return function(){var t=null,n=[];if(arguments.length>1?t=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(t=arguments[0]),!t)return e.apply(null,arguments);for(var i=0,r=t.shift();i<r.length;i++)return t.unshift(r[i]),n.push(e.apply(null,t)),t.shift(),n}},i="optional not ignore cache".split(/\s/),s=0;s<i.length;s++)t[i[s]]=n(t[i[s]]);for(var o=function(e){return function(){return arguments[0]instanceof Array?e.apply(null,arguments[0]):e.apply(null,arguments)}},a="each any all".split(/\s/),l=0;l<a.length;l++)t[a[l]]=o(t[a[l]])}(),function(){var e=Date,t=(e.prototype,e.CultureInfo),n=function(e){for(var t=[],i=0;i<e.length;i++)e[i]instanceof Array?t=t.concat(n(e[i])):e[i]&&t.push(e[i]);return t};e.Grammar={},e.Translator={hour:function(e){return function(){this.hour=Number(e)}},minute:function(e){return function(){this.minute=Number(e)}},second:function(e){return function(){this.second=Number(e)}},meridian:function(e){return function(){this.meridian=e.slice(0,1).toLowerCase()}},timezone:function(e){return function(){var t=e.replace(/[^\d\+\-]/g,"");t.length?this.timezoneOffset=Number(t):this.timezone=e.toLowerCase()}},day:function(e){var t=e[0];return function(){this.day=Number(t.match(/\d+/)[0])}},month:function(e){return function(){this.month=3==e.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(e)/4:Number(e)-1}},year:function(e){return function(){var n=Number(e);this.year=e.length>2?n:n+(n+2e3<t.twoDigitYearMax?2e3:1900)}},rday:function(e){return function(){switch(e){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(t){t=t instanceof Array?t:[t];for(var n=0;n<t.length;n++)t[n]&&t[n].call(this);var i=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=i.getDate()),this.year||(this.year=i.getFullYear()),this.month||0===this.month||(this.month=i.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>e.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var r=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?r.set({timezone:this.timezone}):this.timezoneOffset&&r.set({timezoneOffset:this.timezoneOffset}),r},finish:function(t){if(t=t instanceof Array?n(t):[t],0===t.length)return null;for(var i=0;i<t.length;i++)"function"==typeof t[i]&&t[i].call(this);var r=e.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(r=new Date);var s,o,a,l=!!(this.days&&null!==this.days||this.orient||this.operator);if(a="past"==this.orient||"subtract"==this.operator?-1:1,this.now||-1=="hour minute second".indexOf(this.unit)||r.setTimeToNow(),(this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)&&(this.value=this.month+1,this.month=null,l=!0),!l&&this.weekday&&!this.day&&!this.days){var c=Date[this.weekday]();this.day=c.getDate(),this.month||(this.month=c.getMonth()),this.year=c.getFullYear()}if(l&&this.weekday&&"month"!=this.unit&&(this.unit="day",s=e.getDayNumberFromName(this.weekday)-r.getDay(),o=7,this.days=s?(s+a*o)%o:a*o),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(r.set({day:1*this.value}),l||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,l=!0),l&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",s=this.month-r.getMonth(),o=12,this.months=s?(s+a*o)%o:a*o,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*a:(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*a),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){var c=Date[this.weekday]();this.day=c.getDate(),c.getMonth()!==r.getMonth()&&(this.month=c.getMonth())}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month?(l&&this.timezone&&this.day&&this.days&&(this.day=this.days),l?r.add(this):r.set(this)):Date.today().setWeek(this.value)}};var i,r=e.Parsing.Operators,s=e.Grammar,o=e.Translator;s.datePartDelimiter=r.rtoken(/^([\s\-\.\,\/\x27]+)/),s.timePartDelimiter=r.stoken(":"),s.whiteSpace=r.rtoken(/^\s*/),s.generalDelimiter=r.rtoken(/^(([\s\,]|at|@|on)+)/);var a={};s.ctoken=function(e){var n=a[e];if(!n){for(var i=t.regexPatterns,s=e.split(/\s+/),o=[],l=0;l<s.length;l++)o.push(r.replace(r.rtoken(i[s[l]]),s[l]));n=a[e]=r.any.apply(null,o)}return n},s.ctoken2=function(e){return r.rtoken(t.regexPatterns[e])},s.h=r.cache(r.process(r.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),o.hour)),s.hh=r.cache(r.process(r.rtoken(/^(0[0-9]|1[0-2])/),o.hour)),s.H=r.cache(r.process(r.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),o.hour)),s.HH=r.cache(r.process(r.rtoken(/^([0-1][0-9]|2[0-3])/),o.hour)),s.m=r.cache(r.process(r.rtoken(/^([0-5][0-9]|[0-9])/),o.minute)),s.mm=r.cache(r.process(r.rtoken(/^[0-5][0-9]/),o.minute)),s.s=r.cache(r.process(r.rtoken(/^([0-5][0-9]|[0-9])/),o.second)),s.ss=r.cache(r.process(r.rtoken(/^[0-5][0-9]/),o.second)),s.hms=r.cache(r.sequence([s.H,s.m,s.s],s.timePartDelimiter)),s.t=r.cache(r.process(s.ctoken2("shortMeridian"),o.meridian)),s.tt=r.cache(r.process(s.ctoken2("longMeridian"),o.meridian)),s.z=r.cache(r.process(r.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),o.timezone)),s.zz=r.cache(r.process(r.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),o.timezone)),s.zzz=r.cache(r.process(s.ctoken2("timezone"),o.timezone)),s.timeSuffix=r.each(r.ignore(s.whiteSpace),r.set([s.tt,s.zzz])),s.time=r.each(r.optional(r.ignore(r.stoken("T"))),s.hms,s.timeSuffix),s.d=r.cache(r.process(r.each(r.rtoken(/^([0-2]\d|3[0-1]|\d)/),r.optional(s.ctoken2("ordinalSuffix"))),o.day)),s.dd=r.cache(r.process(r.each(r.rtoken(/^([0-2]\d|3[0-1])/),r.optional(s.ctoken2("ordinalSuffix"))),o.day)),s.ddd=s.dddd=r.cache(r.process(s.ctoken("sun mon tue wed thu fri sat"),function(e){return function(){this.weekday=e}})),s.M=r.cache(r.process(r.rtoken(/^(1[0-2]|0\d|\d)/),o.month)),s.MM=r.cache(r.process(r.rtoken(/^(1[0-2]|0\d)/),o.month)),s.MMM=s.MMMM=r.cache(r.process(s.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),o.month)),s.y=r.cache(r.process(r.rtoken(/^(\d\d?)/),o.year)),s.yy=r.cache(r.process(r.rtoken(/^(\d\d)/),o.year)),s.yyy=r.cache(r.process(r.rtoken(/^(\d\d?\d?\d?)/),o.year)),s.yyyy=r.cache(r.process(r.rtoken(/^(\d\d\d\d)/),o.year)),i=function(){return r.each(r.any.apply(null,arguments),r.not(s.ctoken2("timeContext")))},s.day=i(s.d,s.dd),s.month=i(s.M,s.MMM),s.year=i(s.yyyy,s.yy),s.orientation=r.process(s.ctoken("past future"),function(e){return function(){this.orient=e}}),s.operator=r.process(s.ctoken("add subtract"),function(e){return function(){this.operator=e}}),s.rday=r.process(s.ctoken("yesterday tomorrow today now"),o.rday),s.unit=r.process(s.ctoken("second minute hour day week month year"),function(e){return function(){this.unit=e}}),s.value=r.process(r.rtoken(/^\d\d?(st|nd|rd|th)?/),function(e){return function(){this.value=e.replace(/\D/g,"")}}),s.expression=r.set([s.rday,s.operator,s.value,s.unit,s.orientation,s.ddd,s.MMM]),i=function(){return r.set(arguments,s.datePartDelimiter)},s.mdy=i(s.ddd,s.month,s.day,s.year),s.ymd=i(s.ddd,s.year,s.month,s.day),s.dmy=i(s.ddd,s.day,s.month,s.year),s.date=function(e){return(s[t.dateElementOrder]||s.mdy).call(this,e)},s.format=r.process(r.many(r.any(r.process(r.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(t){if(s[t])return s[t];throw e.Parsing.Exception(t)}),r.process(r.rtoken(/^[^dMyhHmstz]+/),function(e){return r.ignore(r.stoken(e))}))),function(e){return r.process(r.each.apply(null,e),o.finishExact)});var l={},c=function(e){return l[e]=l[e]||s.format(e)[0]};s.formats=function(e){if(e instanceof Array){for(var t=[],n=0;n<e.length;n++)t.push(c(e[n]));return r.any.apply(null,t)}return c(e)},s._formats=s.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),s._start=r.process(r.set([s.date,s.time,s.expression],s.generalDelimiter,s.whiteSpace),o.finish),s.start=function(e){try{var t=s._formats.call({},e);if(0===t[1].length)return t}catch(n){}return s._start.call({},e)},e._parse=e.parse,e.parse=function(t){var n=null;if(!t)return null;if(t instanceof Date)return t;try{n=e.Grammar.start.call({},t.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(i){return null}return 0===n[1].length?n[0]:null},e.getParseFunction=function(t){var n=e.Grammar.formats(t);return function(e){var t=null;try{t=n.call({},e)}catch(i){return null}return 0===t[1].length?t[0]:null}},e.parseExact=function(t,n){return e.getParseFunction(n)(t)}}();